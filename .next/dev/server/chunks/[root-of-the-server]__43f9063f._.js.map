{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\nimport { cookies } from 'next/headers'\nimport { Database } from '@/types/database'\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            )\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n\nexport function createServiceClient() {\n  return createSupabaseClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\n    {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ;AAEO,SAAS;IACd,OAAO,IAAA,gMAAoB,gFAEzB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AAEJ"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/app/api/companies/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { createClient, createServiceClient } from '@/lib/supabase/server'\n\nconst US_STATE_NAMES: Record<string, string> = {\n  AL: 'Alabama', AK: 'Alaska', AZ: 'Arizona', AR: 'Arkansas', CA: 'California',\n  CO: 'Colorado', CT: 'Connecticut', DE: 'Delaware', FL: 'Florida', GA: 'Georgia',\n  HI: 'Hawaii', ID: 'Idaho', IL: 'Illinois', IN: 'Indiana', IA: 'Iowa',\n  KS: 'Kansas', KY: 'Kentucky', LA: 'Louisiana', ME: 'Maine', MD: 'Maryland',\n  MA: 'Massachusetts', MI: 'Michigan', MN: 'Minnesota', MS: 'Mississippi', MO: 'Missouri',\n  MT: 'Montana', NE: 'Nebraska', NV: 'Nevada', NH: 'New Hampshire', NJ: 'New Jersey',\n  NM: 'New Mexico', NY: 'New York', NC: 'North Carolina', ND: 'North Dakota', OH: 'Ohio',\n  OK: 'Oklahoma', OR: 'Oregon', PA: 'Pennsylvania', RI: 'Rhode Island', SC: 'South Carolina',\n  SD: 'South Dakota', TN: 'Tennessee', TX: 'Texas', UT: 'Utah', VT: 'Vermont',\n  VA: 'Virginia', WA: 'Washington', WV: 'West Virginia', WI: 'Wisconsin', WY: 'Wyoming',\n}\n\ninterface FounderData {\n  id: string\n  role?: string\n}\n\nexport async function GET() {\n  try {\n    const authClient = await createClient()\n    const supabase = createServiceClient()\n\n    const { data: { user }, error: userError } = await authClient.auth.getUser()\n    if (userError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const { data: founderData } = await supabase\n      .from('founders')\n      .select('id')\n      .eq('user_id', user.id)\n      .single()\n\n    const founder = founderData as FounderData | null\n    if (!founder) {\n      return NextResponse.json({ error: 'Founder not found' }, { status: 404 })\n    }\n\n    const { data: company, error } = await supabase\n      .from('companies')\n      .select('*')\n      .eq('founder_id', founder.id)\n      .single()\n\n    if (error && error.code !== 'PGRST116') {\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    // Fetch company updates timeline if company exists\n    let updates = null\n    if (company) {\n      const companyRecord = company as { id: string }\n      const { data: updatesData } = await supabase\n        .from('company_updates')\n        .select('*')\n        .eq('company_id', companyRecord.id)\n        .order('created_at', { ascending: true })\n      updates = updatesData\n    }\n\n    return NextResponse.json({ company: company || null, updates: updates || [] })\n  } catch {\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const authClient = await createClient()\n    const supabase = createServiceClient()\n\n    const { data: { user }, error: userError } = await authClient.auth.getUser()\n    if (userError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const { data: founderData } = await supabase\n      .from('founders')\n      .select('id')\n      .eq('user_id', user.id)\n      .single()\n\n    const founder = founderData as FounderData | null\n    if (!founder) {\n      return NextResponse.json({ error: 'Founder not found' }, { status: 404 })\n    }\n\n    const body = await request.json()\n\n    const isAlreadyFormed = body.alreadyFormed === true\n\n    const insertData: Record<string, unknown> = {\n      founder_id: founder.id,\n      name: body.name,\n      legal_name: body.legalName || body.name,\n      state: body.state,\n      description: body.description || null,\n      formation_status: isAlreadyFormed ? 'formed' : 'pending',\n    }\n\n    if (isAlreadyFormed) {\n      if (body.ein) insertData.ein = body.ein\n      insertData.formation_date = body.formationDate || new Date().toISOString().split('T')[0]\n    }\n\n    const { data: company, error } = await (supabase\n      .from('companies') as ReturnType<typeof supabase.from>)\n      .insert(insertData)\n      .select()\n      .single()\n\n    if (error) {\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    const companyId = (company as { id: string }).id\n    const now = new Date()\n\n    if (isAlreadyFormed) {\n      // Already-formed LLC: create recurring compliance deadlines\n      const state = body.state || 'DE'\n      const stateName = US_STATE_NAMES[state] || state\n\n      let annualReportDue: Date\n      if (state === 'WY') {\n        annualReportDue = new Date(now.getFullYear() + 1, now.getMonth(), 1)\n      } else {\n        annualReportDue = new Date(now.getFullYear() + 1, 2, 1)\n      }\n\n      const raRenewalDue = new Date(now.getFullYear() + 1, now.getMonth(), now.getDate())\n\n      let taxDue: Date\n      let taxTitle: string\n      let taxDescription: string\n      if (state === 'DE') {\n        taxDue = new Date(now.getFullYear() + 1, 5, 1)\n        taxTitle = 'Delaware Franchise Tax'\n        taxDescription = 'Annual Delaware franchise tax filing due June 1.'\n      } else {\n        taxDue = new Date(now.getFullYear() + 1, 3, 15)\n        taxTitle = 'Federal Tax Filing'\n        taxDescription = 'Federal tax return filing due April 15.'\n      }\n\n      const boiDue = new Date(now.getTime() + 90 * 24 * 60 * 60 * 1000)\n\n      await (supabase.from('compliance_deadlines') as ReturnType<typeof supabase.from>)\n        .insert([\n          {\n            founder_id: founder.id,\n            company_id: companyId,\n            title: 'FinCEN BOI Report',\n            description: 'Beneficial Ownership Information report â€” verify if already filed.',\n            due_date: boiDue.toISOString().split('T')[0],\n            is_recurring: false,\n            recurring_type: 'boi_report',\n          },\n          {\n            founder_id: founder.id,\n            company_id: companyId,\n            title: `${stateName} LLC Annual Report`,\n            description: `Annual report filing for ${stateName} LLC.`,\n            due_date: annualReportDue.toISOString().split('T')[0],\n            is_recurring: true,\n            recurring_type: 'llc_annual_report',\n          },\n          {\n            founder_id: founder.id,\n            company_id: companyId,\n            title: 'Registered Agent Renewal',\n            description: 'Annual registered agent service renewal.',\n            due_date: raRenewalDue.toISOString().split('T')[0],\n            is_recurring: true,\n            recurring_type: 'ra_renewal',\n          },\n          {\n            founder_id: founder.id,\n            company_id: companyId,\n            title: taxTitle,\n            description: taxDescription,\n            due_date: taxDue.toISOString().split('T')[0],\n            is_recurring: true,\n            recurring_type: 'tax_filing',\n          },\n        ])\n    } else {\n      // New formation: create pending deadlines\n      const boiDue = new Date(now.getTime() + 90 * 24 * 60 * 60 * 1000)\n      const annualReportDue = new Date(now.getFullYear() + 1, 2, 1)\n\n      await (supabase.from('compliance_deadlines') as ReturnType<typeof supabase.from>)\n        .insert([\n          {\n            founder_id: founder.id,\n            company_id: companyId,\n            title: 'FinCEN BOI Report',\n            description: 'Beneficial Ownership Information report due within 90 days of formation.',\n            due_date: boiDue.toISOString().split('T')[0],\n            is_recurring: false,\n            recurring_type: 'boi_report',\n          },\n          {\n            founder_id: founder.id,\n            company_id: companyId,\n            title: `${body.state === 'DE' ? 'Delaware' : 'Wyoming'} Annual Report`,\n            description: `Annual report and franchise tax filing for ${body.state === 'DE' ? 'Delaware' : 'Wyoming'}.`,\n            due_date: annualReportDue.toISOString().split('T')[0],\n            is_recurring: false,\n            recurring_type: null,\n          },\n        ])\n    }\n\n    return NextResponse.json({ company }, { status: 201 })\n  } catch {\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n\nexport async function PATCH(request: Request) {\n  try {\n    const authClient = await createClient()\n    const supabase = createServiceClient()\n\n    const { data: { user }, error: userError } = await authClient.auth.getUser()\n    if (userError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const { data: founderData } = await supabase\n      .from('founders')\n      .select('id, role')\n      .eq('user_id', user.id)\n      .single()\n\n    const founder = founderData as FounderData | null\n    if (!founder) {\n      return NextResponse.json({ error: 'Founder not found' }, { status: 404 })\n    }\n\n    const body = await request.json()\n\n    const updateData: Record<string, unknown> = {}\n    if (body.formationStatus !== undefined) updateData.formation_status = body.formationStatus\n    if (body.ein !== undefined) updateData.ein = body.ein\n    if (body.formationDate !== undefined) updateData.formation_date = body.formationDate\n    if (body.name !== undefined) updateData.name = body.name\n    if (body.legalName !== undefined) updateData.legal_name = body.legalName\n    if (body.registeredAgentName !== undefined) updateData.registered_agent_name = body.registeredAgentName\n    if (body.registeredAgentNotes !== undefined) updateData.registered_agent_notes = body.registeredAgentNotes\n\n    // Determine which company to update\n    const isAdmin = founder.role === 'admin' && body.companyId\n    let queryBuilder = (supabase.from('companies') as ReturnType<typeof supabase.from>)\n      .update(updateData)\n\n    queryBuilder = isAdmin\n      ? queryBuilder.eq('id', body.companyId)\n      : queryBuilder.eq('founder_id', founder.id)\n\n    const { data: company, error } = await queryBuilder\n      .select()\n      .single()\n\n    if (error) {\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    // Log status change to company_updates if status was changed\n    if (body.formationStatus && company) {\n      const companyRecord = company as { id: string }\n      await (supabase.from('company_updates') as ReturnType<typeof supabase.from>)\n        .insert({\n          company_id: companyRecord.id,\n          status: body.formationStatus,\n          note: body.note || null,\n          created_by: founder.id,\n        })\n    }\n\n    // Auto-create recurring deadlines when status changes to 'formed'\n    if (body.formationStatus === 'formed' && company) {\n      const companyRecord = company as { id: string; founder_id: string; state: string }\n\n      // Check if recurring deadlines already exist for this company\n      const { data: existingRecurring } = await supabase\n        .from('compliance_deadlines')\n        .select('id')\n        .eq('company_id', companyRecord.id)\n        .eq('is_recurring', true)\n\n      if (!existingRecurring || existingRecurring.length === 0) {\n        const now = new Date()\n        const state = companyRecord.state || 'DE'\n\n        // LLC Annual Report due date\n        let annualReportDue: Date\n        if (state === 'WY') {\n          // Wyoming: anniversary month of next year\n          annualReportDue = new Date(now.getFullYear() + 1, now.getMonth(), 1)\n        } else {\n          // Delaware: March 1 next year\n          annualReportDue = new Date(now.getFullYear() + 1, 2, 1)\n        }\n\n        // RA Renewal: 1 year from formation\n        const raRenewalDue = new Date(now.getFullYear() + 1, now.getMonth(), now.getDate())\n\n        // Tax Filing due date\n        let taxDue: Date\n        let taxTitle: string\n        let taxDescription: string\n        if (state === 'DE') {\n          taxDue = new Date(now.getFullYear() + 1, 5, 1) // June 1\n          taxTitle = 'Delaware Franchise Tax'\n          taxDescription = 'Annual Delaware franchise tax filing due June 1.'\n        } else {\n          taxDue = new Date(now.getFullYear() + 1, 3, 15) // April 15\n          taxTitle = 'Federal Tax Filing'\n          taxDescription = 'Federal tax return filing due April 15.'\n        }\n\n        const stateName = state === 'DE' ? 'Delaware' : state === 'WY' ? 'Wyoming' : state\n\n        // Remove the non-recurring annual report that was created at company creation\n        await (supabase.from('compliance_deadlines') as ReturnType<typeof supabase.from>)\n          .delete()\n          .eq('company_id', companyRecord.id)\n          .eq('is_recurring', false)\n          .like('title', `%Annual Report%`)\n\n        // Create recurring deadlines\n        await (supabase.from('compliance_deadlines') as ReturnType<typeof supabase.from>)\n          .insert([\n            {\n              founder_id: companyRecord.founder_id,\n              company_id: companyRecord.id,\n              title: `${stateName} LLC Annual Report`,\n              description: `Annual report filing for ${stateName} LLC.`,\n              due_date: annualReportDue.toISOString().split('T')[0],\n              is_recurring: true,\n              recurring_type: 'llc_annual_report',\n            },\n            {\n              founder_id: companyRecord.founder_id,\n              company_id: companyRecord.id,\n              title: 'Registered Agent Renewal',\n              description: 'Annual registered agent service renewal.',\n              due_date: raRenewalDue.toISOString().split('T')[0],\n              is_recurring: true,\n              recurring_type: 'ra_renewal',\n            },\n            {\n              founder_id: companyRecord.founder_id,\n              company_id: companyRecord.id,\n              title: taxTitle,\n              description: taxDescription,\n              due_date: taxDue.toISOString().split('T')[0],\n              is_recurring: true,\n              recurring_type: 'tax_filing',\n            },\n          ])\n      }\n    }\n\n    return NextResponse.json({ company })\n  } catch {\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":"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"}}]
}