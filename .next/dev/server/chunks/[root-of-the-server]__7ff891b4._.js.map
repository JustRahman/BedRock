{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\nimport { cookies } from 'next/headers'\nimport { Database } from '@/types/database'\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            )\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n\nexport function createServiceClient() {\n  return createSupabaseClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\n    {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ;AAEO,SAAS;IACd,OAAO,IAAA,gMAAoB,gFAEzB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AAEJ"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/app/api/founders/ensure/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { createClient, createServiceClient } from '@/lib/supabase/server'\n\nexport async function POST(request: Request) {\n  try {\n    const authClient = await createClient()\n    const supabase = createServiceClient()\n\n    const { data: { user }, error: userError } = await authClient.auth.getUser()\n    if (userError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await request.json().catch(() => ({}))\n\n    // Check if founder already exists\n    const { data: existingFounder } = await (supabase\n      .from('founders') as ReturnType<typeof supabase.from>)\n      .select('id')\n      .eq('user_id', user.id)\n      .single()\n\n    let founderId: string\n\n    if (existingFounder) {\n      founderId = (existingFounder as { id: string }).id\n\n      // Update founder with any new onboarding data\n      if (body.onboardingData?.basicInfo) {\n        const bi = body.onboardingData.basicInfo\n        const updates: Record<string, unknown> = {}\n        if (bi.phone) updates.phone = bi.phone\n        if (bi.dateOfBirth) updates.date_of_birth = bi.dateOfBirth\n        if (bi.countryOfOrigin) updates.country_of_origin = bi.countryOfOrigin\n        if (bi.countryOfResidence) updates.country_of_residence = bi.countryOfResidence\n        if (Object.keys(updates).length > 0) {\n          updates.onboarding_completed = true\n          await (supabase.from('founders') as ReturnType<typeof supabase.from>)\n            .update(updates)\n            .eq('id', founderId)\n        }\n      }\n    } else {\n      // Create founder record\n      const meta = user.user_metadata || {}\n      const bi = body.onboardingData?.basicInfo || {}\n      const { data: founder, error: founderError } = await (supabase\n        .from('founders') as ReturnType<typeof supabase.from>)\n        .insert({\n          user_id: user.id,\n          email: user.email || '',\n          full_name: meta.full_name || bi.fullName || user.email?.split('@')[0] || 'User',\n          phone: bi.phone || null,\n          date_of_birth: bi.dateOfBirth || null,\n          country_of_origin: bi.countryOfOrigin || '',\n          country_of_residence: bi.countryOfResidence || '',\n          onboarding_completed: !!body.trustScore,\n        })\n        .select('id')\n        .single()\n\n      if (founderError) {\n        console.error('[ensure] Founder creation failed:', founderError.message)\n        return NextResponse.json({ error: founderError.message }, { status: 500 })\n      }\n\n      founderId = (founder as { id: string }).id\n    }\n\n    // Save trust score if provided\n    if (body.trustScore) {\n      const { data: existingScore } = await (supabase\n        .from('trust_scores') as ReturnType<typeof supabase.from>)\n        .select('id')\n        .eq('founder_id', founderId)\n        .single()\n\n      // Build DB columns from v2 result format\n      const ts = body.trustScore\n      const isV2 = body.trustScoreVersion === 2 || ts.breakdown?.github\n      let scoreData: Record<string, unknown>\n\n      if (isV2) {\n        // v2: per-provider breakdown available\n        const b = ts.breakdown || {}\n        const githubScore = b.github?.score || 0\n        const stripeScore = b.stripe?.score || 0\n        const linkedinScore = b.linkedin?.score || 0\n        const identityScore = b.identity?.score || 0\n        const dpScore = b.digital_presence?.score || 0\n        const networkScore = b.network?.score || 0\n\n        // Map risk_level to DB status\n        let status = 'review_needed'\n        if (ts.risk_level === 'low') status = ts.score >= 95 ? 'elite' : 'approved'\n        else if (ts.risk_level === 'medium') status = 'review_needed'\n        else if (ts.risk_level === 'high') status = 'conditional'\n        else if (ts.risk_level === 'critical') status = 'not_eligible'\n\n        scoreData = {\n          total_score: ts.score || 0,\n          digital_lineage_score: githubScore + dpScore,\n          business_score: stripeScore,\n          financial_score: stripeScore,\n          social_score: linkedinScore,\n          identity_score: identityScore,\n          network_score: networkScore,\n          country_adjustment: ts.country_adjustment || 0,\n          status,\n          score_breakdown: b,\n        }\n      } else {\n        // v1 fallback (legacy)\n        scoreData = {\n          total_score: ts.totalScore || 0,\n          identity_score: ts.identityScore || 0,\n          business_score: ts.businessScore || 0,\n          financial_score: ts.businessScore || 0,\n          social_score: ts.networkScore || 0,\n          digital_lineage_score: ts.digitalLineageScore || 0,\n          network_score: ts.networkScore || 0,\n          country_adjustment: ts.countryAdjustment || 0,\n          status: ts.status || 'review_needed',\n          score_breakdown: ts.breakdown || {},\n        }\n      }\n\n      if (!existingScore) {\n        const { error: tsError } = await (supabase.from('trust_scores') as ReturnType<typeof supabase.from>).insert({\n          founder_id: founderId,\n          ...scoreData,\n        })\n\n        if (tsError) {\n          console.error('[ensure] Trust score insert failed:', tsError.message)\n        }\n      } else {\n        // Update existing score\n        await (supabase.from('trust_scores') as ReturnType<typeof supabase.from>)\n          .update(scoreData)\n          .eq('founder_id', founderId)\n      }\n    }\n\n    // Save all verification data from onboarding\n    if (body.onboardingData) {\n      const verifications: { type: string; data: unknown }[] = []\n      const od = body.onboardingData\n\n      // Identity verifications\n      if (od.identity) {\n        if (od.identity.hasPassport) {\n          verifications.push({\n            type: 'passport',\n            data: {\n              hasPassport: true,\n              passportNameMatch: od.identity.passportNameMatch,\n              passportDobMatch: od.identity.passportDobMatch,\n              passportGenderMatch: od.identity.passportGenderMatch,\n              passportNationalityMatch: od.identity.passportNationalityMatch,\n              extractedData: od.identity.passportData,\n            },\n          })\n        }\n        if (od.identity.hasLocalId) {\n          verifications.push({\n            type: 'local_id',\n            data: { hasLocalId: true, extractedData: od.identity.localIdData },\n          })\n        }\n        if (od.identity.hasAddressProof) {\n          verifications.push({\n            type: 'address_proof',\n            data: { hasAddressProof: true, extractedData: od.identity.addressProofData },\n          })\n        }\n        if (od.identity.hasLivenessCheck) {\n          verifications.push({\n            type: 'face_scan',\n            data: { matched: true },\n          })\n        }\n      }\n\n      // GitHub OAuth\n      if (od.codeHistory?.githubConnected) {\n        const ghData = body.oauthData?.github || od.codeHistory\n        verifications.push({ type: 'github_oauth', data: ghData })\n      }\n\n      // LinkedIn OAuth\n      if (od.professional?.linkedinConnected) {\n        const liData = body.oauthData?.linkedin || od.professional\n        verifications.push({ type: 'linkedin_oauth', data: liData })\n      }\n\n      // Stripe OAuth\n      if (od.financial?.hasStripeConnected) {\n        const stripeData = body.oauthData?.stripe || od.financial\n        verifications.push({ type: 'stripe_oauth', data: stripeData })\n      }\n\n      // Financial details\n      if (od.financial?.monthlyRevenue || od.financial?.customerGeography) {\n        verifications.push({\n          type: 'financial_info',\n          data: {\n            monthlyRevenue: od.financial.monthlyRevenue,\n            customerGeography: od.financial.customerGeography,\n            chargebackRate: od.financial.chargebackRate,\n            hasBankStatements: od.financial.hasBankStatements,\n          },\n        })\n      }\n\n      // Digital presence\n      if (od.digitalPresence) {\n        const dp = od.digitalPresence\n        if (dp.website || dp.twitterHandle || dp.instagramHandle || dp.appStoreUrl) {\n          verifications.push({\n            type: 'digital_presence',\n            data: {\n              website: dp.website,\n              websiteVerified: dp.websiteVerified,\n              twitterHandle: dp.twitterHandle,\n              twitterVerified: dp.twitterVerified,\n              instagramHandle: dp.instagramHandle,\n              instagramVerified: dp.instagramVerified,\n              appStoreUrl: dp.appStoreUrl,\n              appStoreVerified: dp.appStoreVerified,\n            },\n          })\n        }\n      }\n\n      // Trust signals\n      if (od.trustSignals) {\n        const ts = od.trustSignals\n        if (ts.hasReferral || ts.referralVerified) {\n          verifications.push({\n            type: 'referral',\n            data: { hasReferral: ts.hasReferral, referralVerified: ts.referralVerified, referralCode: ts.referralCode },\n          })\n        }\n        if (ts.hasUniversityEmail || ts.universityEmailVerified) {\n          verifications.push({\n            type: 'university_email',\n            data: { hasUniversityEmail: ts.hasUniversityEmail, verified: ts.universityEmailVerified, email: ts.universityEmail },\n          })\n        }\n        if (ts.hasAccelerator || ts.acceleratorVerified) {\n          verifications.push({\n            type: 'accelerator',\n            data: { hasAccelerator: ts.hasAccelerator, verified: ts.acceleratorVerified, name: ts.acceleratorName },\n          })\n        }\n        if (ts.hasEmployerVerification) {\n          verifications.push({\n            type: 'employer_verification',\n            data: { hasEmployerVerification: true },\n          })\n        }\n      }\n\n      // Upsert all verifications\n      for (const v of verifications) {\n        const status = (\n          v.type === 'github_oauth' && od.codeHistory?.githubConnected ? 'verified' :\n          v.type === 'linkedin_oauth' && od.professional?.linkedinConnected ? 'verified' :\n          v.type === 'stripe_oauth' && od.financial?.hasStripeConnected ? 'verified' :\n          v.type === 'face_scan' ? 'verified' :\n          v.type === 'referral' && od.trustSignals?.referralVerified ? 'verified' :\n          v.type === 'university_email' && od.trustSignals?.universityEmailVerified ? 'verified' :\n          v.type === 'accelerator' && od.trustSignals?.acceleratorVerified ? 'verified' :\n          'pending'\n        ) as 'verified' | 'pending'\n\n        try {\n          await (supabase.from('founder_verifications') as ReturnType<typeof supabase.from>)\n            .upsert({\n              founder_id: founderId,\n              verification_type: v.type,\n              status,\n              verified_at: status === 'verified' ? new Date().toISOString() : null,\n              metadata: v.data,\n            }, { onConflict: 'founder_id,verification_type' })\n        } catch {\n          // Non-critical â€” continue saving other verifications\n        }\n      }\n    }\n\n    return NextResponse.json({ founder: { id: founderId }, created: !existingFounder })\n  } catch (err) {\n    console.error('[ensure] Unexpected error:', err)\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":"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"}}]
}