{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/status-card.tsx"],"sourcesContent":["import { LucideIcon } from 'lucide-react'\n\ninterface StatusCardProps {\n  title: string\n  icon: LucideIcon\n  status: 'completed' | 'in_progress' | 'pending' | 'not_started'\n  statusText: string\n  description?: string\n}\n\nconst statusConfig = {\n  completed: {\n    badge: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20',\n    label: 'Completed',\n  },\n  in_progress: {\n    badge: 'bg-blue-500/10 text-blue-400 border-blue-500/20',\n    label: 'In Progress',\n  },\n  pending: {\n    badge: 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20',\n    label: 'Pending',\n  },\n  not_started: {\n    badge: 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20',\n    label: 'Not Started',\n  },\n}\n\nexport function StatusCard({\n  title,\n  icon: Icon,\n  status,\n  statusText,\n  description,\n}: StatusCardProps) {\n  const config = statusConfig[status]\n\n  return (\n    <div className=\"rounded-xl border border-border bg-card p-3 sm:p-5\">\n      <div className=\"flex items-center justify-between mb-2 sm:mb-3\">\n        <span className=\"text-xs sm:text-sm font-medium text-zinc-400\">{title}</span>\n        <Icon className=\"h-4 w-4 sm:h-5 sm:w-5 text-zinc-600\" />\n      </div>\n      <div className=\"flex items-center gap-2 mb-1.5 sm:mb-2\">\n        <span className={`inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] sm:text-xs font-medium ${config.badge}`}>\n          {config.label}\n        </span>\n      </div>\n      <p className=\"text-sm sm:text-lg font-semibold text-white truncate\">{statusText}</p>\n      {description ? (\n        <p className=\"mt-1 text-xs sm:text-sm text-zinc-500 truncate\">{description}</p>\n      ) : null}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAUA,MAAM,eAAe;IACnB,WAAW;QACT,OAAO;QACP,OAAO;IACT;IACA,aAAa;QACX,OAAO;QACP,OAAO;IACT;IACA,SAAS;QACP,OAAO;QACP,OAAO;IACT;IACA,aAAa;QACX,OAAO;QACP,OAAO;IACT;AACF;AAEO,SAAS,WAAW,EACzB,KAAK,EACL,MAAM,IAAI,EACV,MAAM,EACN,UAAU,EACV,WAAW,EACK;IAChB,MAAM,SAAS,YAAY,CAAC,OAAO;IAEnC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAgD;;;;;;kCAChE,8OAAC;wBAAK,WAAU;;;;;;;;;;;;0BAElB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,WAAW,CAAC,4FAA4F,EAAE,OAAO,KAAK,EAAE;8BAC3H,OAAO,KAAK;;;;;;;;;;;0BAGjB,8OAAC;gBAAE,WAAU;0BAAwD;;;;;;YACpE,4BACC,8OAAC;gBAAE,WAAU;0BAAkD;;;;;uBAC7D;;;;;;;AAGV"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/action-items.tsx"],"sourcesContent":["import { Button } from '@/components/ui/button'\nimport { ArrowRight, AlertCircle, FileText, Calendar, CreditCard } from 'lucide-react'\nimport Link from 'next/link'\n\ninterface ActionItem {\n  id: string\n  title: string\n  description: string\n  priority: 'high' | 'medium' | 'low'\n  icon: 'document' | 'calendar' | 'payment' | 'alert'\n  href: string\n}\n\nconst iconMap = {\n  document: FileText,\n  calendar: Calendar,\n  payment: CreditCard,\n  alert: AlertCircle,\n}\n\nconst priorityColors = {\n  high: 'border-l-red-500/60',\n  medium: 'border-l-yellow-500/60',\n  low: 'border-l-blue-500/60',\n}\n\ninterface ActionItemsProps {\n  items: ActionItem[]\n}\n\nexport function ActionItems({ items }: ActionItemsProps) {\n  if (items.length === 0) {\n    return (\n      <div className=\"rounded-xl border border-border bg-card p-6\">\n        <h3 className=\"text-lg font-semibold text-white mb-3\">Action Items</h3>\n        <p className=\"text-sm text-zinc-500\">\n          You&apos;re all caught up! No pending actions.\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"rounded-xl border border-border bg-card p-6\">\n      <h3 className=\"text-lg font-semibold text-white mb-4\">Action Items</h3>\n      <div className=\"space-y-3\">\n        {items.map((item) => {\n          const Icon = iconMap[item.icon]\n          return (\n            <div\n              key={item.id}\n              className={`rounded-lg border border-border border-l-4 bg-muted/40 p-4 ${priorityColors[item.priority]}`}\n            >\n              <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between sm:gap-4\">\n                <div className=\"flex items-start gap-3\">\n                  <Icon className=\"mt-0.5 h-5 w-5 shrink-0 text-zinc-500\" />\n                  <div>\n                    <p className=\"font-medium text-zinc-200\">{item.title}</p>\n                    <p className=\"mt-1 text-sm text-zinc-500\">{item.description}</p>\n                  </div>\n                </div>\n                <Link href={item.href}>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    className=\"shrink-0 gap-1 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 w-full sm:w-auto\"\n                  >\n                    Take Action\n                    <ArrowRight className=\"h-4 w-4\" />\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport const mockActionItems: ActionItem[] = [\n  {\n    id: '1',\n    title: 'Upload Passport',\n    description: 'Your passport document is required to complete verification',\n    priority: 'high',\n    icon: 'document',\n    href: '/dashboard/documents',\n  },\n  {\n    id: '2',\n    title: 'Upcoming Compliance Deadline',\n    description: 'Annual report due in 14 days',\n    priority: 'medium',\n    icon: 'calendar',\n    href: '/dashboard/compliance',\n  },\n  {\n    id: '3',\n    title: 'Complete Payment',\n    description: 'Service fee payment pending',\n    priority: 'high',\n    icon: 'payment',\n    href: '/dashboard/billing',\n  },\n]\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;AAWA,MAAM,UAAU;IACd,UAAU,0NAAQ;IAClB,UAAU,sNAAQ;IAClB,SAAS,gOAAU;IACnB,OAAO,mOAAW;AACpB;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,QAAQ;IACR,KAAK;AACP;AAMO,SAAS,YAAY,EAAE,KAAK,EAAoB;IACrD,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAK3C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,OAAO,OAAO,CAAC,KAAK,IAAI,CAAC;oBAC/B,qBACE,8OAAC;wBAEC,WAAW,CAAC,2DAA2D,EAAE,cAAc,CAAC,KAAK,QAAQ,CAAC,EAAE;kCAExG,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;;;;;;sDAChB,8OAAC;;8DACC,8OAAC;oDAAE,WAAU;8DAA6B,KAAK,KAAK;;;;;;8DACpD,8OAAC;oDAAE,WAAU;8DAA8B,KAAK,WAAW;;;;;;;;;;;;;;;;;;8CAG/D,8OAAC,uKAAI;oCAAC,MAAM,KAAK,IAAI;8CACnB,cAAA,8OAAC,4IAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,WAAU;;4CACX;0DAEC,8OAAC,gOAAU;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;uBAlBvB,KAAK,EAAE;;;;;gBAwBlB;;;;;;;;;;;;AAIR;AAEO,MAAM,kBAAgC;IAC3C;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,MAAM;IACR;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,UAAU;QACV,MAAM;QACN,MAAM;IACR;CACD"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/trust-score-card.tsx"],"sourcesContent":["import { TrendingUp } from 'lucide-react'\n\ntype TrustScoreStatus = 'elite' | 'approved' | 'review_needed' | 'conditional' | 'not_eligible'\n\ninterface V2ProviderBreakdown {\n  score: number\n  max: number\n  details?: Record<string, string | number | boolean>\n}\n\ninterface TrustScoreCardProps {\n  score: number\n  status: TrustScoreStatus\n  statusLabel: string\n  breakdown: {\n    digitalLineage: number\n    business: number\n    identity: number\n    network: number\n  }\n  scoreBreakdown?: Record<string, unknown> | null\n}\n\nfunction getScoreColor(score: number): string {\n  if (score >= 85) return 'text-emerald-400'\n  if (score >= 70) return 'text-blue-400'\n  if (score >= 50) return 'text-yellow-400'\n  if (score >= 30) return 'text-orange-400'\n  return 'text-red-400'\n}\n\nfunction getStatusStyle(status: TrustScoreStatus): string {\n  switch (status) {\n    case 'elite': return 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20'\n    case 'approved': return 'bg-blue-500/10 text-blue-400 border-blue-500/20'\n    case 'review_needed': return 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20'\n    case 'conditional': return 'bg-orange-500/10 text-orange-400 border-orange-500/20'\n    case 'not_eligible': return 'bg-red-500/10 text-red-400 border-red-500/20'\n    default: return 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20'\n  }\n}\n\nfunction getBarColor(value: number, max: number): string {\n  if (max === 0) return 'bg-zinc-600'\n  const pct = (value / max) * 100\n  if (pct >= 75) return 'bg-emerald-500'\n  if (pct >= 50) return 'bg-blue-500'\n  if (pct >= 25) return 'bg-yellow-500'\n  return 'bg-zinc-600'\n}\n\nexport function TrustScoreCard({ score, status, statusLabel, breakdown, scoreBreakdown }: TrustScoreCardProps) {\n  // If v2 score_breakdown JSON is available, use real per-provider scores\n  const hasV2 = scoreBreakdown && typeof scoreBreakdown === 'object' && 'github' in scoreBreakdown\n\n  let bars: { label: string; value: number; max: number }[]\n\n  // Check for v2 data — supports both new `economic_activity` and legacy `stripe` key\n  const hasV2EA = scoreBreakdown && typeof scoreBreakdown === 'object' && 'economic_activity' in scoreBreakdown\n\n  if (hasV2 || hasV2EA) {\n    const github = scoreBreakdown!.github as V2ProviderBreakdown | undefined\n    const econ = (scoreBreakdown!.economic_activity ?? scoreBreakdown!.stripe) as V2ProviderBreakdown | undefined\n    const linkedin = scoreBreakdown!.linkedin as V2ProviderBreakdown | undefined\n    const identity = scoreBreakdown!.identity as V2ProviderBreakdown | undefined\n    const dp = scoreBreakdown!.digital_presence as V2ProviderBreakdown | undefined\n    const network = scoreBreakdown!.network as V2ProviderBreakdown | undefined\n\n    bars = [\n      { label: 'GitHub', value: github?.score ?? 0, max: github?.max ?? 25 },\n      { label: 'Economic Activity', value: econ?.score ?? 0, max: econ?.max ?? 25 },\n      { label: 'LinkedIn', value: linkedin?.score ?? 0, max: linkedin?.max ?? 10 },\n      { label: 'Identity', value: identity?.score ?? 0, max: identity?.max ?? 20 },\n      { label: 'Digital Presence', value: dp?.score ?? 0, max: dp?.max ?? 10 },\n      { label: 'Trust Network', value: network?.score ?? 0, max: network?.max ?? 10 },\n    ]\n  } else {\n    // Legacy fallback: approximate from DB columns\n    const githubScore = Math.min(25, Math.round(breakdown.digitalLineage * 0.71))\n    const digitalPresenceScore = Math.min(10, breakdown.digitalLineage - githubScore)\n    const econScore = Math.min(25, breakdown.business)\n    const linkedinScore = Math.min(10, breakdown.identity)\n    const networkScore = Math.min(10, breakdown.network)\n\n    bars = [\n      { label: 'GitHub', value: githubScore, max: 25 },\n      { label: 'Economic Activity', value: econScore, max: 25 },\n      { label: 'LinkedIn', value: linkedinScore, max: 10 },\n      { label: 'Digital Presence', value: digitalPresenceScore, max: 10 },\n      { label: 'Trust Network', value: networkScore, max: 10 },\n    ]\n  }\n\n  return (\n    <div className=\"rounded-xl border border-border bg-card p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold text-white\">Trust Score</h3>\n        <TrendingUp className=\"h-5 w-5 text-zinc-600\" />\n      </div>\n\n      <div className=\"flex items-center gap-4 mb-6\">\n        <div className={`text-4xl font-bold ${getScoreColor(score)}`}>\n          {score}\n        </div>\n        <div>\n          <span className={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium ${getStatusStyle(status)}`}>\n            {statusLabel}\n          </span>\n          <p className=\"mt-1 text-sm text-zinc-500\">out of 100 points</p>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {bars.map((bar) => (\n          <ScoreBar key={bar.label} label={bar.label} value={bar.value} max={bar.max} />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nfunction ScoreBar({ label, value, max }: { label: string; value: number; max: number }) {\n  const percentage = max > 0 ? Math.round((value / max) * 100) : 0\n\n  return (\n    <div className=\"space-y-1\">\n      <div className=\"flex justify-between text-sm\">\n        <span className=\"text-zinc-500\">{label}</span>\n        <span className=\"font-medium text-zinc-300\">\n          {value}/{max}\n        </span>\n      </div>\n      <div className=\"h-1.5 w-full overflow-hidden rounded-full bg-muted\">\n        <div\n          className={`h-full rounded-full transition-all ${getBarColor(value, max)}`}\n          style={{ width: `${percentage}%` }}\n        />\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/index.ts"],"sourcesContent":["export { Sidebar } from './sidebar'\nexport { StatusCard } from './status-card'\nexport { ActionItems, mockActionItems } from './action-items'\nexport { TrustScoreCard } from './trust-score-card'\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 581, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { XIcon } from \"lucide-react\"\nimport { Dialog as DialogPrimitive } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({\n  className,\n  showCloseButton = false,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      {showCloseButton && (\n        <DialogPrimitive.Close asChild>\n          <Button variant=\"outline\">Close</Button>\n        </DialogPrimitive.Close>\n      )}\n    </div>\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AACA;AAPA;;;;;;AASA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,8MAAe,CAAC,IAAI;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,8MAAe,CAAC,OAAO;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,8MAAe,CAAC,MAAM;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,8MAAe,CAAC,KAAK;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,8MAAe,CAAC,OAAO;QACtB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,8MAAe,CAAC,OAAO;gBACtB,aAAU;gBACV,WAAW,IAAA,yHAAE,EACX,4XACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,8MAAe,CAAC,KAAK;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,kBAAkB,KAAK,EACvB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,0DACA;QAED,GAAG,KAAK;;YAER;YACA,iCACC,8OAAC,8MAAe,CAAC,KAAK;gBAAC,OAAO;0BAC5B,cAAA,8OAAC,4IAAM;oBAAC,SAAQ;8BAAU;;;;;;;;;;;;;;;;;AAKpC;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,8MAAe,CAAC,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,8MAAe,CAAC,WAAW;QAC1B,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/wallet-connect-modal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Loader2, AlertCircle } from 'lucide-react'\nimport type { ChainId } from '@/lib/crypto/types'\n\ninterface WalletConnectModalProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onVerified: () => void\n}\n\n// EVM chain IDs to our chain names\nconst EVM_CHAIN_MAP: Record<number, ChainId> = {\n  1: 'ethereum',\n  8453: 'base',\n  137: 'polygon',\n}\n\nconst EVM_CHAIN_NAMES: Record<number, string> = {\n  1: 'Ethereum',\n  8453: 'Base',\n  137: 'Polygon',\n}\n\nconst SUPPORTED_EVM_IDS = [1, 8453, 137]\n\ninterface DetectedWallet {\n  id: 'metamask' | 'phantom' | 'tronlink'\n  name: string\n  description: string\n}\n\n// When multiple wallets are installed, they all fight over window.ethereum.\n// Phantom sets isMetaMask=true on its ethereum provider, so we can't trust that flag alone.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getMetaMaskProvider(): any | null {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const win = window as any\n  const ethereum = win.ethereum\n\n  if (!ethereum) return null\n\n  // If providers array exists (multiple wallets installed), find the real MetaMask\n  if (Array.isArray(ethereum.providers)) {\n    const mm = ethereum.providers.find(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (p: any) => p.isMetaMask && !p.isPhantom\n    )\n    return mm || null\n  }\n\n  // No providers array = single wallet. If Phantom is installed, then\n  // window.ethereum is Phantom's provider (it fakes isMetaMask=true).\n  if (win.phantom) return null\n\n  // No Phantom — trust isMetaMask\n  if (ethereum.isMetaMask) return ethereum\n\n  return null\n}\n\nfunction detectWallets(): DetectedWallet[] {\n  const wallets: DetectedWallet[] = []\n  if (typeof window === 'undefined') return wallets\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const win = window as any\n\n  // MetaMask: use providers array to find the real one\n  if (getMetaMaskProvider()) {\n    wallets.push({ id: 'metamask', name: 'MetaMask', description: 'Ethereum, Base, Polygon' })\n  }\n\n  // Phantom: always use phantom.solana — never window.ethereum\n  if (win.phantom?.solana?.isPhantom || win.solana?.isPhantom) {\n    wallets.push({ id: 'phantom', name: 'Phantom', description: 'Solana' })\n  }\n\n  // TronLink: check window.tronWeb with a ready address\n  if (win.tronWeb?.defaultAddress?.base58) {\n    wallets.push({ id: 'tronlink', name: 'TronLink', description: 'Tron' })\n  }\n\n  return wallets\n}\n\nexport function WalletConnectModal({ open, onOpenChange, onVerified }: WalletConnectModalProps) {\n  const [wallets, setWallets] = useState<DetectedWallet[]>([])\n  const [status, setStatus] = useState<'idle' | 'connecting' | 'chain_select' | 'signing' | 'verifying' | 'error'>('idle')\n  const [error, setError] = useState<string | null>(null)\n  const [evmChains, setEvmChains] = useState<{ chainId: number; name: string }[]>([])\n\n  // Detect installed wallets when modal opens\n  useEffect(() => {\n    if (open) {\n      // Small delay to let extensions inject\n      const timer = setTimeout(() => setWallets(detectWallets()), 200)\n      return () => clearTimeout(timer)\n    }\n  }, [open])\n\n  async function connectMetaMask(targetChainId?: number) {\n    setError(null)\n    setStatus('connecting')\n\n    try {\n      const ethereum = getMetaMaskProvider()\n      if (!ethereum) {\n        throw new Error('MetaMask not found.')\n      }\n\n      // Connect\n      const accounts = await ethereum.request({ method: 'eth_requestAccounts' }) as string[]\n      const address = accounts[0]\n\n      // Get current chain\n      const rawChainId = await ethereum.request({ method: 'eth_chainId' }) as string\n      let currentChainId = parseInt(rawChainId, 16)\n\n      // If a target chain was specified, switch to it\n      if (targetChainId && currentChainId !== targetChainId) {\n        try {\n          await ethereum.request({\n            method: 'wallet_switchEthereumChain',\n            params: [{ chainId: `0x${targetChainId.toString(16)}` }],\n          })\n          currentChainId = targetChainId\n        } catch {\n          throw new Error(`Please switch to ${EVM_CHAIN_NAMES[targetChainId] || 'a supported chain'} in MetaMask.`)\n        }\n      }\n\n      // Check if current chain is supported\n      const chain = EVM_CHAIN_MAP[currentChainId]\n      if (!chain && !targetChainId) {\n        // Show chain picker — user is on an unsupported chain\n        const available = SUPPORTED_EVM_IDS.map(id => ({ chainId: id, name: EVM_CHAIN_NAMES[id] }))\n        setEvmChains(available)\n        setStatus('chain_select')\n        return\n      }\n\n      if (!chain) {\n        throw new Error('Unsupported network. Please switch to Ethereum, Base, or Polygon.')\n      }\n\n      await signAndVerify(chain, address, ethereum)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to connect MetaMask')\n      setStatus('error')\n    }\n  }\n\n  async function connectPhantom() {\n    setError(null)\n    setStatus('connecting')\n\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const phantom = (window as any).phantom?.solana || (window as any).solana\n      if (!phantom?.isPhantom) {\n        throw new Error('Phantom wallet not found.')\n      }\n\n      const resp = await phantom.connect()\n      const address = resp.publicKey.toString()\n\n      // Get challenge\n      setStatus('signing')\n      const challengeRes = await fetch('/api/crypto/challenge', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ address }),\n      })\n      const { message } = await challengeRes.json()\n\n      // Sign\n      const encoded = new TextEncoder().encode(message)\n      const signResult = await phantom.signMessage(encoded, 'utf8')\n      const bs58Module = await import('bs58')\n      const signature = bs58Module.default.encode(signResult.signature)\n\n      // Verify\n      setStatus('verifying')\n      const verifyRes = await fetch('/api/crypto/verify', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ chain: 'solana', address, signature, message }),\n      })\n\n      if (!verifyRes.ok) {\n        const data = await verifyRes.json()\n        throw new Error(data.error || 'Verification failed')\n      }\n\n      onVerified()\n      onOpenChange(false)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to connect Phantom')\n      setStatus('error')\n    }\n  }\n\n  async function connectTronLink() {\n    setError(null)\n    setStatus('connecting')\n\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const tronWeb = (window as any).tronWeb\n      if (!tronWeb?.defaultAddress?.base58) {\n        throw new Error('TronLink wallet not found or not logged in.')\n      }\n\n      const address = tronWeb.defaultAddress.base58\n\n      // Get challenge\n      setStatus('signing')\n      const challengeRes = await fetch('/api/crypto/challenge', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ address }),\n      })\n      const { message } = await challengeRes.json()\n\n      // Sign\n      const signature = await tronWeb.trx.signMessageV2(message)\n\n      // Verify\n      setStatus('verifying')\n      const verifyRes = await fetch('/api/crypto/verify', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ chain: 'tron', address, signature, message }),\n      })\n\n      if (!verifyRes.ok) {\n        const data = await verifyRes.json()\n        throw new Error(data.error || 'Verification failed')\n      }\n\n      onVerified()\n      onOpenChange(false)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to connect TronLink')\n      setStatus('error')\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async function signAndVerify(chain: ChainId, address: string, ethereum: any) {\n    // Get challenge\n    setStatus('signing')\n    const challengeRes = await fetch('/api/crypto/challenge', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ address }),\n    })\n    const { message } = await challengeRes.json()\n\n    // Sign\n    const signature = await ethereum.request({\n      method: 'personal_sign',\n      params: [message, address],\n    }) as string\n\n    // Verify\n    setStatus('verifying')\n    const verifyRes = await fetch('/api/crypto/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ chain, address, signature, message }),\n    })\n\n    if (!verifyRes.ok) {\n      const data = await verifyRes.json()\n      throw new Error(data.error || 'Verification failed')\n    }\n\n    onVerified()\n    onOpenChange(false)\n  }\n\n  const reset = () => {\n    setStatus('idle')\n    setError(null)\n    setEvmChains([])\n  }\n\n  const handleWalletClick = (wallet: DetectedWallet) => {\n    if (wallet.id === 'metamask') connectMetaMask()\n    else if (wallet.id === 'phantom') connectPhantom()\n    else if (wallet.id === 'tronlink') connectTronLink()\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={(v) => { onOpenChange(v); if (!v) reset() }}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Connect Crypto Wallet</DialogTitle>\n          <DialogDescription>\n            Choose your wallet to sign a message and verify ownership.\n          </DialogDescription>\n        </DialogHeader>\n\n        {/* Wallet selection */}\n        {status === 'idle' && (\n          <div className=\"py-4 space-y-3\">\n            {wallets.length === 0 ? (\n              <div className=\"flex flex-col items-center gap-3 py-4 text-center\">\n                <AlertCircle className=\"h-8 w-8 text-zinc-500\" />\n                <div>\n                  <p className=\"text-sm font-medium text-zinc-300\">No wallets detected</p>\n                  <p className=\"mt-1 text-xs text-zinc-500\">\n                    Install <a href=\"https://metamask.io\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">MetaMask</a>,{' '}\n                    <a href=\"https://phantom.app\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">Phantom</a>, or{' '}\n                    <a href=\"https://www.tronlink.org\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">TronLink</a> and reload.\n                  </p>\n                </div>\n              </div>\n            ) : (\n              wallets.map((wallet) => (\n                <button\n                  key={wallet.id}\n                  type=\"button\"\n                  onClick={() => handleWalletClick(wallet)}\n                  className=\"flex w-full items-center gap-3 rounded-lg border border-border p-4 text-left hover:bg-muted transition-colors\"\n                >\n                  <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-muted font-bold text-xs shrink-0\">\n                    {wallet.name.charAt(0)}\n                  </div>\n                  <div>\n                    <p className=\"font-medium text-sm\">{wallet.name}</p>\n                    <p className=\"text-xs text-muted-foreground\">{wallet.description}</p>\n                  </div>\n                </button>\n              ))\n            )}\n          </div>\n        )}\n\n        {/* EVM chain selection (when MetaMask is on an unsupported chain) */}\n        {status === 'chain_select' && (\n          <div className=\"py-4 space-y-3\">\n            <p className=\"text-sm text-zinc-400\">\n              Your wallet is on an unsupported network. Pick one to switch to:\n            </p>\n            {evmChains.map((c) => (\n              <button\n                key={c.chainId}\n                type=\"button\"\n                onClick={() => connectMetaMask(c.chainId)}\n                className=\"flex w-full items-center gap-3 rounded-lg border border-border p-3 text-left hover:bg-muted transition-colors\"\n              >\n                <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-muted font-bold text-xs\">\n                  {c.chainId === 1 ? 'ETH' : c.chainId === 8453 ? 'BASE' : 'POL'}\n                </div>\n                <p className=\"font-medium text-sm\">{c.name}</p>\n              </button>\n            ))}\n            <Button onClick={reset} variant=\"ghost\" size=\"sm\" className=\"w-full text-zinc-500\">\n              Back\n            </Button>\n          </div>\n        )}\n\n        {/* Loading states */}\n        {(status === 'connecting' || status === 'signing' || status === 'verifying') && (\n          <div className=\"flex flex-col items-center gap-3 py-8\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-blue-500\" />\n            <p className=\"text-sm text-muted-foreground\">\n              {status === 'connecting' && 'Connecting wallet...'}\n              {status === 'signing' && 'Please sign the message in your wallet...'}\n              {status === 'verifying' && 'Verifying signature & fetching on-chain data...'}\n            </p>\n          </div>\n        )}\n\n        {/* Error state */}\n        {status === 'error' && (\n          <div className=\"py-4 space-y-4\">\n            <div className=\"rounded-lg border border-red-500/20 bg-red-500/10 p-3\">\n              <p className=\"text-sm text-red-400\">{error}</p>\n            </div>\n            <Button onClick={reset} variant=\"outline\" className=\"w-full\">\n              Try Again\n            </Button>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1362, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/economic-activity-card.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Wallet, CreditCard, DollarSign, Check, ExternalLink } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { WalletConnectModal } from './wallet-connect-modal'\n\ninterface EconomicActivityCardProps {\n  cryptoVerified: boolean\n  cryptoChain?: string\n  cryptoScore?: number\n  paymentVerified: boolean\n  stripeConnected: boolean\n  stripeScore?: number\n  hasBankApp: boolean\n  onRefresh: () => void\n}\n\nexport function EconomicActivityCard({\n  cryptoVerified,\n  cryptoChain,\n  cryptoScore,\n  paymentVerified,\n  stripeConnected,\n  stripeScore,\n  hasBankApp,\n  onRefresh,\n}: EconomicActivityCardProps) {\n  const [walletModalOpen, setWalletModalOpen] = useState(false)\n\n  return (\n    <>\n      <div className=\"rounded-xl border border-border bg-card p-6\">\n        <h3 className=\"text-lg font-semibold text-white mb-4\">Economic Activity</h3>\n        <p className=\"text-sm text-zinc-500 mb-4\">Verify your economic history for up to 25 points</p>\n\n        <div className=\"space-y-3\">\n          {/* Crypto Wallet */}\n          <div className=\"flex items-center justify-between rounded-lg border border-border p-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className={`flex h-9 w-9 items-center justify-center rounded-full ${cryptoVerified ? 'bg-emerald-500/10' : 'bg-muted'}`}>\n                <Wallet className={`h-4 w-4 ${cryptoVerified ? 'text-emerald-400' : 'text-zinc-500'}`} />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-zinc-200\">Crypto Wallet</p>\n                {cryptoVerified ? (\n                  <p className=\"text-xs text-emerald-400\">\n                    {cryptoChain} verified &mdash; {cryptoScore}/15\n                  </p>\n                ) : (\n                  <p className=\"text-xs text-zinc-500\">Sign a message to verify</p>\n                )}\n              </div>\n            </div>\n            {cryptoVerified ? (\n              <div className=\"flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/10\">\n                <Check className=\"h-4 w-4 text-emerald-400\" />\n              </div>\n            ) : (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setWalletModalOpen(true)}\n                className=\"text-xs\"\n              >\n                Connect\n              </Button>\n            )}\n          </div>\n\n          {/* Formation Payment */}\n          <div className=\"flex items-center justify-between rounded-lg border border-border p-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className={`flex h-9 w-9 items-center justify-center rounded-full ${paymentVerified ? 'bg-emerald-500/10' : 'bg-muted'}`}>\n                <DollarSign className={`h-4 w-4 ${paymentVerified ? 'text-emerald-400' : 'text-zinc-500'}`} />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-zinc-200\">Formation Payment</p>\n                {paymentVerified ? (\n                  <p className=\"text-xs text-emerald-400\">Verified &mdash; 5/5</p>\n                ) : (\n                  <p className=\"text-xs text-zinc-500\">Pending &mdash; 0/5</p>\n                )}\n              </div>\n            </div>\n            {paymentVerified ? (\n              <div className=\"flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/10\">\n                <Check className=\"h-4 w-4 text-emerald-400\" />\n              </div>\n            ) : (\n              <span className=\"text-xs text-zinc-600\">Admin verified</span>\n            )}\n          </div>\n\n          {/* Stripe Connected */}\n          <div className=\"flex items-center justify-between rounded-lg border border-border p-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className={`flex h-9 w-9 items-center justify-center rounded-full ${stripeConnected ? 'bg-emerald-500/10' : hasBankApp ? 'bg-muted' : 'bg-muted opacity-50'}`}>\n                <CreditCard className={`h-4 w-4 ${stripeConnected ? 'text-emerald-400' : 'text-zinc-500'}`} />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-zinc-200\">Stripe Connected</p>\n                {stripeConnected ? (\n                  <p className=\"text-xs text-emerald-400\">Connected &mdash; {stripeScore}/15</p>\n                ) : hasBankApp ? (\n                  <p className=\"text-xs text-zinc-500\">Connect your Stripe account</p>\n                ) : (\n                  <p className=\"text-xs text-zinc-600\">Available after banking setup</p>\n                )}\n              </div>\n            </div>\n            {stripeConnected ? (\n              <div className=\"flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/10\">\n                <Check className=\"h-4 w-4 text-emerald-400\" />\n              </div>\n            ) : hasBankApp ? (\n              <a href=\"/api/oauth/stripe/connect\" className=\"inline-flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300\">\n                Connect <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            ) : null}\n          </div>\n        </div>\n      </div>\n\n      <WalletConnectModal\n        open={walletModalOpen}\n        onOpenChange={setWalletModalOpen}\n        onVerified={onRefresh}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AALA;;;;;;AAkBO,SAAS,qBAAqB,EACnC,cAAc,EACd,WAAW,EACX,WAAW,EACX,eAAe,EACf,eAAe,EACf,WAAW,EACX,UAAU,EACV,SAAS,EACiB;IAC1B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,qBACE;;0BACE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAE1C,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAW,CAAC,sDAAsD,EAAE,iBAAiB,sBAAsB,YAAY;0DAC1H,cAAA,8OAAC,gNAAM;oDAAC,WAAW,CAAC,QAAQ,EAAE,iBAAiB,qBAAqB,iBAAiB;;;;;;;;;;;0DAEvF,8OAAC;;kEACC,8OAAC;wDAAE,WAAU;kEAAoC;;;;;;oDAChD,+BACC,8OAAC;wDAAE,WAAU;;4DACV;4DAAY;4DAAmB;4DAAY;;;;;;6EAG9C,8OAAC;wDAAE,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;oCAI1C,+BACC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,6MAAK;4CAAC,WAAU;;;;;;;;;;6DAGnB,8OAAC,4IAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,SAAS,IAAM,mBAAmB;wCAClC,WAAU;kDACX;;;;;;;;;;;;0CAOL,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAW,CAAC,sDAAsD,EAAE,kBAAkB,sBAAsB,YAAY;0DAC3H,cAAA,8OAAC,gOAAU;oDAAC,WAAW,CAAC,QAAQ,EAAE,kBAAkB,qBAAqB,iBAAiB;;;;;;;;;;;0DAE5F,8OAAC;;kEACC,8OAAC;wDAAE,WAAU;kEAAoC;;;;;;oDAChD,gCACC,8OAAC;wDAAE,WAAU;kEAA2B;;;;;6EAExC,8OAAC;wDAAE,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;oCAI1C,gCACC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,6MAAK;4CAAC,WAAU;;;;;;;;;;6DAGnB,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;;;;;;;0CAK5C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAW,CAAC,sDAAsD,EAAE,kBAAkB,sBAAsB,aAAa,aAAa,uBAAuB;0DAChK,cAAA,8OAAC,gOAAU;oDAAC,WAAW,CAAC,QAAQ,EAAE,kBAAkB,qBAAqB,iBAAiB;;;;;;;;;;;0DAE5F,8OAAC;;kEACC,8OAAC;wDAAE,WAAU;kEAAoC;;;;;;oDAChD,gCACC,8OAAC;wDAAE,WAAU;;4DAA2B;4DAAmB;4DAAY;;;;;;+DACrE,2BACF,8OAAC;wDAAE,WAAU;kEAAwB;;;;;6EAErC,8OAAC;wDAAE,WAAU;kEAAwB;;;;;;;;;;;;;;;;;;oCAI1C,gCACC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,6MAAK;4CAAC,WAAU;;;;;;;;;;+CAEjB,2BACF,8OAAC;wCAAE,MAAK;wCAA4B,WAAU;;4CAA2E;0DAC/G,8OAAC,sOAAY;gDAAC,WAAU;;;;;;;;;;;+CAEhC;;;;;;;;;;;;;;;;;;;0BAKV,8OAAC,mLAAkB;gBACjB,MAAM;gBACN,cAAc;gBACd,YAAY;;;;;;;;AAIpB"}},
    {"offset": {"line": 1716, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/lib/pending-uploads.ts"],"sourcesContent":["const DB_NAME = 'bedrock_pending_uploads'\nconst STORE_NAME = 'uploads'\nconst DB_VERSION = 1\n\nexport type DocumentType = 'passport' | 'local_id' | 'address_proof' | 'selfie'\n\ninterface PendingUpload {\n  type: DocumentType\n  fileName: string\n  mimeType: string\n  blob: Blob\n}\n\nfunction openDB(): Promise<IDBDatabase> {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION)\n    request.onupgradeneeded = () => {\n      const db = request.result\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME, { keyPath: 'type' })\n      }\n    }\n    request.onsuccess = () => resolve(request.result)\n    request.onerror = () => reject(request.error)\n  })\n}\n\nexport async function storePendingUpload(type: DocumentType, file: File): Promise<void> {\n  const db = await openDB()\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite')\n    const store = tx.objectStore(STORE_NAME)\n    store.put({ type, fileName: file.name, mimeType: file.type, blob: file })\n    tx.oncomplete = () => resolve()\n    tx.onerror = () => reject(tx.error)\n  })\n}\n\nexport async function getPendingUploads(): Promise<PendingUpload[]> {\n  const db = await openDB()\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly')\n    const store = tx.objectStore(STORE_NAME)\n    const request = store.getAll()\n    request.onsuccess = () => resolve(request.result)\n    request.onerror = () => reject(request.error)\n  })\n}\n\nexport async function clearPendingUploads(): Promise<void> {\n  const db = await openDB()\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite')\n    const store = tx.objectStore(STORE_NAME)\n    store.clear()\n    tx.oncomplete = () => resolve()\n    tx.onerror = () => reject(tx.error)\n  })\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,UAAU;AAChB,MAAM,aAAa;AACnB,MAAM,aAAa;AAWnB,SAAS;IACP,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,UAAU,UAAU,IAAI,CAAC,SAAS;QACxC,QAAQ,eAAe,GAAG;YACxB,MAAM,KAAK,QAAQ,MAAM;YACzB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,aAAa;gBAC7C,GAAG,iBAAiB,CAAC,YAAY;oBAAE,SAAS;gBAAO;YACrD;QACF;QACA,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;IAC9C;AACF;AAEO,eAAe,mBAAmB,IAAkB,EAAE,IAAU;IACrE,MAAM,KAAK,MAAM;IACjB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,MAAM,QAAQ,GAAG,WAAW,CAAC;QAC7B,MAAM,GAAG,CAAC;YAAE;YAAM,UAAU,KAAK,IAAI;YAAE,UAAU,KAAK,IAAI;YAAE,MAAM;QAAK;QACvE,GAAG,UAAU,GAAG,IAAM;QACtB,GAAG,OAAO,GAAG,IAAM,OAAO,GAAG,KAAK;IACpC;AACF;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,MAAM,QAAQ,GAAG,WAAW,CAAC;QAC7B,MAAM,UAAU,MAAM,MAAM;QAC5B,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;IAC9C;AACF;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,KAAK,GAAG,WAAW,CAAC,YAAY;QACtC,MAAM,QAAQ,GAAG,WAAW,CAAC;QAC7B,MAAM,KAAK;QACX,GAAG,UAAU,GAAG,IAAM;QACtB,GAAG,OAAO,GAAG,IAAM,OAAO,GAAG,KAAK;IACpC;AACF"}},
    {"offset": {"line": 1781, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/components/dashboard/pending-upload-banner.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useCallback } from 'react'\nimport { getPendingUploads, clearPendingUploads, type DocumentType } from '@/lib/pending-uploads'\nimport { CheckCircle2, Loader2, AlertTriangle, Upload, Clock } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\n\nconst typeLabels: Record<DocumentType, string> = {\n  passport: 'Passport',\n  local_id: 'Local ID',\n  address_proof: 'Address Proof',\n  selfie: 'Face Verification Selfie',\n}\n\ninterface UploadedDoc {\n  label: string\n  verificationStatus: string | null\n}\n\ninterface PendingUploadBannerProps {\n  onUploadsComplete?: () => void\n}\n\nexport function PendingUploadBanner({ onUploadsComplete }: PendingUploadBannerProps) {\n  const [status, setStatus] = useState<'checking' | 'uploading' | 'success' | 'error' | 'idle'>('checking')\n  const [uploadedDocs, setUploadedDocs] = useState<UploadedDoc[]>([])\n  const [errorMsg, setErrorMsg] = useState('')\n\n  const uploadFiles = useCallback(async () => {\n    setStatus('uploading')\n    setUploadedDocs([])\n    setErrorMsg('')\n\n    try {\n      const uploads = await getPendingUploads()\n      if (uploads.length === 0) {\n        setStatus('idle')\n        return\n      }\n\n      // Ensure founder exists before uploading documents\n      await fetch('/api/founders/ensure', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({}),\n      })\n\n      const results: UploadedDoc[] = []\n\n      for (const upload of uploads) {\n        const formData = new FormData()\n        const file = new File([upload.blob], upload.fileName, { type: upload.mimeType })\n        formData.append('file', file)\n        formData.append('type', upload.type)\n\n        const res = await fetch('/api/documents', { method: 'POST', body: formData })\n        if (!res.ok) {\n          const data = await res.json()\n          // If founder doesn't exist yet, silently clear pending uploads — they'll upload manually later\n          if (res.status === 404 || data.error?.includes('not found') || data.error?.includes('Founder')) {\n            await clearPendingUploads()\n            setStatus('idle')\n            return\n          }\n          throw new Error(data.error || `Failed to upload ${typeLabels[upload.type]}`)\n        }\n\n        const data = await res.json()\n        results.push({\n          label: typeLabels[upload.type],\n          verificationStatus: data.verification?.status ?? null,\n        })\n        setUploadedDocs([...results])\n      }\n\n      await clearPendingUploads()\n      setStatus('success')\n      onUploadsComplete?.()\n    } catch (err) {\n      setErrorMsg(err instanceof Error ? err.message : 'Upload failed')\n      setStatus('error')\n    }\n  }, [onUploadsComplete])\n\n  useEffect(() => {\n    async function check() {\n      try {\n        const uploads = await getPendingUploads()\n        if (uploads.length === 0) {\n          setStatus('idle')\n          return\n        }\n        uploadFiles()\n      } catch {\n        setStatus('idle')\n      }\n    }\n    check()\n  }, [uploadFiles])\n\n  if (status === 'idle' || status === 'checking') return null\n\n  return (\n    <div className=\"mb-6 rounded-xl border border-border bg-card p-4\">\n      {status === 'uploading' && (\n        <div className=\"flex items-center gap-3\">\n          <Loader2 className=\"h-5 w-5 animate-spin text-blue-400\" />\n          <div>\n            <p className=\"font-medium text-zinc-200\">Uploading and verifying your documents...</p>\n            {uploadedDocs.length > 0 && (\n              <p className=\"text-sm text-zinc-500\">\n                Uploaded: {uploadedDocs.map((d) => d.label).join(', ')}\n              </p>\n            )}\n          </div>\n        </div>\n      )}\n\n      {status === 'success' && (\n        <div className=\"flex items-start gap-3\">\n          <CheckCircle2 className=\"mt-0.5 h-5 w-5 text-emerald-400\" />\n          <div>\n            <p className=\"font-medium text-zinc-200\">Documents uploaded successfully!</p>\n            <div className=\"mt-1 space-y-1\">\n              {uploadedDocs.map((doc, i) => (\n                <div key={i} className=\"flex items-center gap-2 text-sm\">\n                  <span className=\"text-zinc-300\">{doc.label}</span>\n                  <span className=\"text-zinc-600\">&mdash;</span>\n                  {doc.verificationStatus === 'verified' ? (\n                    <span className=\"flex items-center gap-1 text-emerald-400\">\n                      <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                      Verified\n                    </span>\n                  ) : doc.verificationStatus === 'review_needed' ? (\n                    <span className=\"flex items-center gap-1 text-orange-400\">\n                      <AlertTriangle className=\"h-3.5 w-3.5\" />\n                      Review needed\n                    </span>\n                  ) : (\n                    <span className=\"flex items-center gap-1 text-zinc-500\">\n                      <Clock className=\"h-3.5 w-3.5\" />\n                      Pending review\n                    </span>\n                  )}\n                </div>\n              ))}\n            </div>\n            <p className=\"mt-2 text-sm text-zinc-500\">\n              View them on the{' '}\n              <a href=\"/dashboard/documents\" className=\"text-blue-400 underline hover:text-blue-300\">Documents page</a>.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {status === 'error' && (\n        <div className=\"flex items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-3\">\n            <AlertTriangle className=\"h-5 w-5 text-orange-400\" />\n            <div>\n              <p className=\"font-medium text-zinc-200\">Upload failed</p>\n              <p className=\"text-sm text-zinc-500\">{errorMsg}</p>\n            </div>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={uploadFiles}\n            className=\"gap-2 text-zinc-300 hover:text-white hover:bg-white/[0.05]\"\n          >\n            <Upload className=\"h-4 w-4\" />\n            Retry\n          </Button>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2149, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahmanbazarov/Data/programming/BedRock/src/app/dashboard/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useCallback } from 'react'\nimport Link from 'next/link'\nimport { FileText, Calendar, Shield, Building2, Landmark, RefreshCw } from 'lucide-react'\nimport { StatusCard, ActionItems, TrustScoreCard } from '@/components/dashboard'\nimport { EconomicActivityCard } from '@/components/dashboard/economic-activity-card'\nimport { PendingUploadBanner } from '@/components/dashboard/pending-upload-banner'\n\ninterface TrustScoreData {\n  total_score: number\n  identity_score: number\n  business_score: number\n  financial_score: number\n  social_score: number\n  digital_lineage_score: number\n  network_score: number\n  status: 'elite' | 'approved' | 'review_needed' | 'conditional' | 'not_eligible'\n  score_breakdown?: Record<string, unknown> | null\n}\n\ninterface DocumentData {\n  id: string\n  verified: boolean\n}\n\ninterface DeadlineData {\n  id: string\n  completed: boolean\n  due_date: string\n}\n\ninterface CompanyData {\n  id: string\n  name: string\n  formation_status: string\n  ein: string | null\n}\n\ninterface BankAppData {\n  id: string\n  status: string\n  bank_name: string | null\n}\n\nconst statusLabels: Record<string, string> = {\n  elite: 'Elite',\n  approved: 'Approved',\n  review_needed: 'Review Needed',\n  conditional: 'Conditional',\n  not_eligible: 'Not Eligible',\n}\n\nexport default function DashboardPage() {\n  const [trustScore, setTrustScore] = useState<TrustScoreData | null>(null)\n  const [documents, setDocuments] = useState<DocumentData[]>([])\n  const [deadlines, setDeadlines] = useState<DeadlineData[]>([])\n  const [company, setCompany] = useState<CompanyData | null>(null)\n  const [bankApp, setBankApp] = useState<BankAppData | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  const refreshDocuments = useCallback(async () => {\n    try {\n      const res = await fetch('/api/documents')\n      if (res.ok) {\n        const data = await res.json()\n        setDocuments(data.documents ?? [])\n      }\n    } catch {\n      // silently fail\n    }\n  }, [])\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        // Step 1: Ensure founder exists (auto-create if missing)\n        // Also pass any unsaved onboarding data from localStorage\n        let trustScorePayload = undefined\n        let onboardingPayload = undefined\n        let oauthPayload: Record<string, unknown> | undefined = undefined\n        try {\n          const storedScore = localStorage.getItem('trustScoreResult')\n          if (storedScore) trustScorePayload = JSON.parse(storedScore)\n          const storedData = localStorage.getItem('onboardingData')\n          if (storedData) onboardingPayload = JSON.parse(storedData)\n          // Collect OAuth profile data from localStorage\n          const oauthData: Record<string, unknown> = {}\n          const gh = localStorage.getItem('oauth_github_data')\n          const li = localStorage.getItem('oauth_linkedin_data')\n          const st = localStorage.getItem('oauth_stripe_data')\n          if (gh) oauthData.github = JSON.parse(gh)\n          if (li) oauthData.linkedin = JSON.parse(li)\n          if (st) oauthData.stripe = JSON.parse(st)\n          if (Object.keys(oauthData).length > 0) oauthPayload = oauthData\n        } catch { /* ignore */ }\n\n        const ensureRes = await fetch('/api/founders/ensure', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            trustScore: trustScorePayload,\n            onboardingData: onboardingPayload,\n            oauthData: oauthPayload,\n          }),\n        })\n\n        // Only clean up after confirmed save\n        if (ensureRes.ok) {\n          try {\n            localStorage.removeItem('trustScoreResult')\n            localStorage.removeItem('onboardingData')\n            localStorage.removeItem('oauth_github_data')\n            localStorage.removeItem('oauth_linkedin_data')\n            localStorage.removeItem('oauth_stripe_data')\n          } catch { /* ignore */ }\n        }\n\n        // Step 2: Fetch all dashboard data\n        const [tsRes, docRes, compRes, coRes, bankRes] = await Promise.all([\n          fetch('/api/trust-score'),\n          fetch('/api/documents'),\n          fetch('/api/compliance'),\n          fetch('/api/companies'),\n          fetch('/api/bank-applications'),\n        ])\n\n        if (tsRes.ok) {\n          const tsData = await tsRes.json()\n          setTrustScore(tsData.trustScore ?? null)\n        }\n        if (docRes.ok) {\n          const docData = await docRes.json()\n          setDocuments(docData.documents ?? [])\n        }\n        if (compRes.ok) {\n          const compData = await compRes.json()\n          setDeadlines(compData.deadlines ?? [])\n        }\n        if (coRes.ok) {\n          const coData = await coRes.json()\n          setCompany(coData.company ?? null)\n        }\n        if (bankRes.ok) {\n          const bankData = await bankRes.json()\n          if (bankData.applications && bankData.applications.length > 0) {\n            setBankApp(bankData.applications[0])\n          }\n        }\n      } catch {\n        // silently fail\n      } finally {\n        setLoading(false)\n      }\n    }\n    fetchData()\n  }, [])\n\n  if (loading) {\n    return (\n      <div>\n        <div className=\"mb-8\">\n          <div className=\"h-8 w-48 animate-pulse rounded bg-muted\" />\n          <div className=\"mt-2 h-4 w-72 animate-pulse rounded bg-muted\" />\n        </div>\n        <div className=\"mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4\">\n          {[...Array(4)].map((_, i) => (\n            <div key={i} className=\"rounded-xl border border-border bg-card p-6\">\n              <div className=\"h-24 animate-pulse rounded bg-muted\" />\n            </div>\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  const verifiedDocs = documents.filter((d) => d.verified).length\n  const pendingDocs = documents.filter((d) => !d.verified).length\n  const upcomingDeadlines = deadlines.filter((d) => !d.completed).length\n  const overdueDeadlines = deadlines.filter(\n    (d) => !d.completed && new Date(d.due_date) < new Date()\n  ).length\n\n  // Formation status\n  const formationStatus = company?.formation_status || 'not_started'\n  const formationText = company\n    ? formationStatus === 'formed'\n      ? company.ein\n        ? 'LLC Formed + EIN'\n        : 'LLC Formed'\n      : formationStatus === 'processing'\n      ? 'Processing'\n      : 'Pending'\n    : 'Not Started'\n\n  // Bank status\n  const bankStatus = bankApp?.status || 'not_started'\n  const bankText = bankApp\n    ? bankApp.status === 'approved'\n      ? 'Approved'\n      : bankApp.status === 'submitted' || bankApp.status === 'under_review'\n      ? `${bankApp.bank_name} - ${bankApp.status.replace('_', ' ')}`\n      : 'Draft'\n    : 'Not Started'\n\n  // Build dynamic action items\n  const actionItems: {\n    id: string\n    title: string\n    description: string\n    priority: 'high' | 'medium' | 'low'\n    icon: 'document' | 'calendar' | 'payment' | 'alert'\n    href: string\n  }[] = []\n\n  if (!trustScore) {\n    actionItems.push({\n      id: 'onboard',\n      title: 'Complete Onboarding',\n      description: 'Finish the onboarding process to calculate your trust score',\n      priority: 'high',\n      icon: 'alert',\n      href: '/onboarding',\n    })\n  }\n\n  if (documents.length === 0) {\n    actionItems.push({\n      id: 'upload-docs',\n      title: 'Upload Documents',\n      description: 'Upload your verification documents to get started',\n      priority: 'high',\n      icon: 'document',\n      href: '/dashboard/documents',\n    })\n  }\n\n  if (!company && trustScore) {\n    actionItems.push({\n      id: 'start-formation',\n      title: 'Start LLC Formation',\n      description: 'Begin your LLC formation process',\n      priority: 'high',\n      icon: 'alert',\n      href: '/dashboard/formation',\n    })\n  }\n\n  if (company && company.formation_status === 'formed' && !company.ein) {\n    actionItems.push({\n      id: 'get-ein',\n      title: 'Obtain Your EIN',\n      description: 'Your LLC is formed. Get your EIN from the IRS.',\n      priority: 'high',\n      icon: 'alert',\n      href: '/dashboard/formation/ein',\n    })\n  }\n\n  if (company?.ein && !bankApp) {\n    actionItems.push({\n      id: 'bank-app',\n      title: 'Apply for Bank Account',\n      description: 'Your LLC and EIN are ready. Start your bank application.',\n      priority: 'high',\n      icon: 'payment',\n      href: '/dashboard/bank/application',\n    })\n  }\n\n  if (overdueDeadlines > 0) {\n    actionItems.push({\n      id: 'overdue',\n      title: `${overdueDeadlines} Overdue Deadline${overdueDeadlines > 1 ? 's' : ''}`,\n      description: 'You have overdue compliance deadlines that need attention',\n      priority: 'high',\n      icon: 'alert',\n      href: '/dashboard/compliance',\n    })\n  }\n\n  if (upcomingDeadlines > 0 && overdueDeadlines === 0) {\n    actionItems.push({\n      id: 'upcoming',\n      title: `${upcomingDeadlines} Upcoming Deadline${upcomingDeadlines > 1 ? 's' : ''}`,\n      description: 'Stay on top of your compliance deadlines',\n      priority: 'medium',\n      icon: 'calendar',\n      href: '/dashboard/compliance',\n    })\n  }\n\n  return (\n    <div>\n      <PendingUploadBanner onUploadsComplete={refreshDocuments} />\n\n      {trustScore ? (\n        <Link href=\"/onboarding\">\n          <div className=\"mb-6 flex items-center gap-3 rounded-xl border border-blue-500/20 bg-blue-500/10 p-4 cursor-pointer hover:bg-blue-500/15 transition-colors\">\n            <RefreshCw className=\"h-5 w-5 text-blue-400 shrink-0\" />\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-medium text-blue-300\">Re-do Onboarding</p>\n              <p className=\"text-xs text-blue-400/70\">Update your identity, social profiles, and digital presence to recalculate your trust score.</p>\n            </div>\n          </div>\n        </Link>\n      ) : null}\n\n      <div className=\"mb-6 sm:mb-8\">\n        <h1 className=\"text-xl sm:text-2xl font-bold text-white\">Dashboard</h1>\n        <p className=\"mt-1 text-sm text-zinc-500\">\n          Welcome back! Here&apos;s an overview of your account status.\n        </p>\n      </div>\n\n      {/* Status Overview */}\n      <div className=\"mb-6 sm:mb-8 grid grid-cols-2 gap-3 sm:gap-6 lg:grid-cols-4\">\n        <StatusCard\n          title=\"Trust Score\"\n          icon={Shield}\n          status={trustScore ? 'completed' : 'not_started'}\n          statusText={trustScore ? `${trustScore.total_score} / 100` : 'Not calculated'}\n          description={trustScore ? statusLabels[trustScore.status] : 'Complete onboarding first'}\n        />\n        <StatusCard\n          title=\"Formation\"\n          icon={Landmark}\n          status={\n            formationStatus === 'formed' ? 'completed' :\n            formationStatus === 'processing' || formationStatus === 'pending' ? 'in_progress' :\n            'not_started'\n          }\n          statusText={formationText}\n          description={company ? `${company.name}` : 'Start LLC formation'}\n        />\n        <StatusCard\n          title=\"Compliance\"\n          icon={Calendar}\n          status={overdueDeadlines > 0 ? 'pending' : upcomingDeadlines > 0 ? 'in_progress' : 'completed'}\n          statusText={`${upcomingDeadlines} upcoming`}\n          description={overdueDeadlines > 0 ? `${overdueDeadlines} overdue` : 'All on track'}\n        />\n        <StatusCard\n          title=\"Bank Account\"\n          icon={Building2}\n          status={\n            bankStatus === 'approved' || bankStatus === 'completed' ? 'completed' :\n            bankStatus === 'submitted' || bankStatus === 'under_review' ? 'in_progress' :\n            bankStatus === 'draft' ? 'pending' :\n            'not_started'\n          }\n          statusText={bankText}\n          description={bankApp ? `${bankApp.bank_name || 'Bank'}` : 'Available after EIN'}\n        />\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-3\">\n        {/* Trust Score */}\n        <div className=\"lg:col-span-1 space-y-6\">\n          {trustScore ? (\n            <TrustScoreCard\n              score={trustScore.total_score}\n              status={trustScore.status}\n              statusLabel={statusLabels[trustScore.status]}\n              breakdown={{\n                digitalLineage: trustScore.digital_lineage_score,\n                business: trustScore.business_score,\n                identity: trustScore.identity_score,\n                network: trustScore.network_score,\n              }}\n              scoreBreakdown={trustScore.score_breakdown}\n            />\n          ) : (\n            <div className=\"rounded-xl border border-border bg-card py-12 text-center\">\n              <Shield className=\"mx-auto mb-3 h-10 w-10 text-zinc-600\" />\n              <p className=\"font-medium text-white\">No Trust Score Yet</p>\n              <p className=\"mt-1 text-sm text-zinc-500\">\n                Complete the onboarding process to calculate your score.\n              </p>\n            </div>\n          )}\n\n          <EconomicActivityCard\n            cryptoVerified={!!(trustScore?.score_breakdown && typeof trustScore.score_breakdown === 'object' && (trustScore.score_breakdown as Record<string, unknown>).economic_activity && ((trustScore.score_breakdown as Record<string, Record<string, unknown>>).economic_activity?.details as Record<string, unknown>)?.crypto_verified)}\n            cryptoChain={trustScore?.score_breakdown ? String(((trustScore.score_breakdown as Record<string, Record<string, unknown>>).economic_activity?.details as Record<string, unknown>)?.crypto_chain || '') : undefined}\n            cryptoScore={trustScore?.score_breakdown ? Number(((trustScore.score_breakdown as Record<string, Record<string, unknown>>).economic_activity?.details as Record<string, unknown>)?.crypto_subtotal || 0) : undefined}\n            paymentVerified={!!(trustScore?.score_breakdown && typeof trustScore.score_breakdown === 'object' && ((trustScore.score_breakdown as Record<string, Record<string, unknown>>).economic_activity?.details as Record<string, unknown>)?.payment_verified)}\n            stripeConnected={!!(trustScore?.score_breakdown && typeof trustScore.score_breakdown === 'object' && ((trustScore.score_breakdown as Record<string, Record<string, unknown>>).economic_activity?.details as Record<string, unknown>)?.stripe_connected)}\n            stripeScore={trustScore?.score_breakdown ? Number(((trustScore.score_breakdown as Record<string, Record<string, unknown>>).economic_activity?.details as Record<string, unknown>)?.stripe_subtotal || 0) : undefined}\n            hasBankApp={!!bankApp}\n            onRefresh={() => window.location.reload()}\n          />\n\n        </div>\n\n        {/* Action Items */}\n        <div className=\"lg:col-span-2\">\n          <ActionItems items={actionItems} />\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}