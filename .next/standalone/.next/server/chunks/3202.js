"use strict";exports.id=3202,exports.ids=[3202],exports.modules={3202:(a,b,c)=>{c.d(b,{O:()=>g,d:()=>f,fetchGitHubProfile:()=>h});var d=c(30181),e=c(32268);function f(a){let b=process.env.GITHUB_CLIENT_ID;if(!b)throw Error("GITHUB_CLIENT_ID is not set");let c=new URLSearchParams({client_id:b,scope:"read:user",state:a,redirect_uri:`${(0,e.Xq)()}/api/oauth/github/callback`});return`https://github.com/login/oauth/authorize?${c.toString()}`}async function g(a){let b=await fetch("https://github.com/login/oauth/access_token",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({client_id:process.env.GITHUB_CLIENT_ID,client_secret:process.env.GITHUB_CLIENT_SECRET,code:a})}),c=await b.json();if(c.error)throw Error(`GitHub OAuth error: ${c.error_description||c.error}`);return c.access_token}async function h(a){let b=new d.E({auth:a}),{data:c}=await b.users.getAuthenticated(),{data:e}=await b.repos.listForAuthenticatedUser({sort:"pushed",per_page:100}),f={},g=0;for(let a of e)a.language&&(f[a.language]=(f[a.language]||0)+1),g+=a.stargazers_count??0;let h=Object.entries(f).sort((a,b)=>b[1]-a[1]).slice(0,5).map(([a])=>a),i=c.created_at,j=Math.floor((Date.now()-new Date(i).getTime())/315576e5),k=0,l=0;try{let b=new Date;b.setDate(b.getDate()-30);let c=await fetch("https://api.github.com/graphql",{method:"POST",headers:{Authorization:`bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({query:`query($since: DateTime!) {
          viewer {
            contributionsCollection {
              totalCommitContributions
            }
            recent: contributionsCollection(from: $since) {
              totalCommitContributions
            }
          }
        }`,variables:{since:b.toISOString()}})});if(c.ok){let a=await c.json();k=a.data?.viewer?.contributionsCollection?.totalCommitContributions??0,l=a.data?.viewer?.recent?.totalCommitContributions??0}}catch{}return{login:c.login,name:c.name,avatarUrl:c.avatar_url,createdAt:i,accountAgeYears:j,publicRepos:c.public_repos,followers:c.followers,totalStars:g,topLanguages:h,commitsLastYear:k,commitsLast30Days:l}}}};