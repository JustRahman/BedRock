(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2678],{2484:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2806).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6534:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5155),a=s(2115),i=s(8500),l=s.n(i),o=s(3321),n=s(9003),c=s(3546),d=s(6443),m=s(8713),u=s(9239),x=s(5283),h=s(2484),p=s(439),f=s(6296);let b=d.Ikc({fullName:d.YjP().min(2,"Name must be at least 2 characters"),email:d.YjP().email("Please enter a valid email address"),password:d.YjP().min(8,"Password must be at least 8 characters"),confirmPassword:d.YjP()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function g(){(0,o.useRouter)();let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[d,g]=(0,a.useState)(!1),{register:w,handleSubmit:N,formState:{errors:v}}=(0,n.mN)({resolver:(0,c.u)(b),defaultValues:(()=>{try{let e=sessionStorage.getItem("onboardingData");if(e){let t=JSON.parse(e);return{fullName:t.basicInfo?.fullName||"",email:t.basicInfo?.email||""}}}catch{}return{}})()}),y=async e=>{if(i(!0),t(null),!(0,m.$)()){t("Database not configured. Please add your Supabase credentials to .env.local and restart the server."),i(!1);return}try{let s=(0,m.U)(),{data:r,error:a}=await s.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.fullName}}});if(a){t(a.message),i(!1);return}let l=sessionStorage.getItem("onboardingData"),o=sessionStorage.getItem("trustScoreResult");if(r.user&&l)try{let t=JSON.parse(l).basicInfo||{};if(await s.from("founders").insert({user_id:r.user.id,email:e.email,full_name:e.fullName,phone:t.phone||null,country_of_origin:t.countryOfOrigin||"",country_of_residence:t.countryOfResidence||"",onboarding_completed:!0}),o){let e=JSON.parse(o),{data:t}=await s.from("founders").select("id").eq("user_id",r.user.id).single();if(t){let r=t.id;for(let t of(await s.from("trust_scores").insert({founder_id:r,total_score:e.totalScore||0,identity_score:e.identityScore||0,business_score:e.businessScore||0,digital_lineage_score:e.digitalLineageScore||0,network_score:e.networkScore||0,country_adjustment:e.countryAdjustment||0,status:e.status||"review_needed",score_breakdown:e.breakdown||{},version:2}),[{type:"github_oauth",key:"oauth_github_data"},{type:"linkedin_oauth",key:"oauth_linkedin_data"},{type:"stripe_oauth",key:"oauth_stripe_data"}])){let e=sessionStorage.getItem(t.key);if(e)try{let a=JSON.parse(e);await s.from("founder_verifications").upsert({founder_id:r,verification_type:t.type,status:"verified",verified_at:new Date().toISOString(),metadata:a},{onConflict:"founder_id,verification_type"})}catch{}}}}sessionStorage.removeItem("onboardingData"),sessionStorage.removeItem("trustScoreResult")}catch{console.error("Failed to save onboarding data")}try{await fetch("/api/email/welcome",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.fullName,email:e.email})})}catch{}g(!0)}catch(s){let e=s instanceof Error?s.message:"Something went wrong";"Load failed"===e||e.includes("fetch")?t("Cannot connect to the server. Please check that Supabase is configured in .env.local and restart the dev server."):t(e)}finally{i(!1)}};return d?(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-[#09090b] px-4 py-12 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] opacity-40",children:[(0,r.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-600/30 rounded-full blur-[128px]"}),(0,r.jsx)("div",{className:"absolute top-20 right-1/4 w-80 h-80 bg-violet-600/25 rounded-full blur-[128px]"})]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:64px_64px]"}),(0,r.jsx)("div",{className:"relative w-full max-w-md",children:(0,r.jsxs)("div",{className:"rounded-2xl border border-white/[0.08] bg-white/[0.03] p-8 sm:p-10 backdrop-blur-sm text-center",children:[(0,r.jsx)("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-emerald-500/10 border border-emerald-500/20 mb-6",children:(0,r.jsx)(h.A,{className:"h-7 w-7 text-emerald-400"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Check your email"}),(0,r.jsx)("p",{className:"mt-2 text-zinc-400",children:"We've sent you a confirmation link. Please check your email to verify your account."}),(0,r.jsx)(l(),{href:"/login",children:(0,r.jsx)(u.$,{variant:"ghost",className:"mt-6 w-full border border-white/[0.15] text-zinc-200 hover:bg-white/[0.08] hover:border-white/[0.25] hover:text-white rounded-xl py-6 text-base backdrop-blur-sm",children:"Return to Login"})})]})})]}):(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-[#09090b] px-4 py-12 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] opacity-40",children:[(0,r.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-600/30 rounded-full blur-[128px]"}),(0,r.jsx)("div",{className:"absolute top-20 right-1/4 w-80 h-80 bg-violet-600/25 rounded-full blur-[128px]"})]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:64px_64px]"}),(0,r.jsx)("div",{className:"relative w-full max-w-md",children:(0,r.jsxs)("div",{className:"rounded-2xl border border-white/[0.08] bg-white/[0.03] p-8 sm:p-10 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)(l(),{href:"/",className:"inline-flex items-center justify-center gap-2.5 group",children:[(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-violet-600 transition-transform duration-300 group-hover:scale-105",children:(0,r.jsx)(p.A,{className:"h-5 w-5 text-white"})}),(0,r.jsx)("span",{className:"text-lg font-semibold tracking-tight text-white",children:"BedRock"})]}),(0,r.jsx)("h1",{className:"mt-6 text-2xl font-bold text-white",children:"Create an account"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-zinc-400",children:"Start your journey to a US bank account"})]}),(0,r.jsxs)("form",{onSubmit:N(y),className:"space-y-5",children:[e&&(0,r.jsx)(x.Fc,{variant:"destructive",className:"border-red-500/20 bg-red-500/10 text-red-300",children:(0,r.jsx)(x.TN,{children:e})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-zinc-300",children:"Full Name"}),(0,r.jsx)("input",{id:"fullName",type:"text",placeholder:"John Doe",...w("fullName"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),v.fullName&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:v.fullName.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-zinc-300",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",placeholder:"founder@company.com",...w("email"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),v.email&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:v.email.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-zinc-300",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",placeholder:"••••••••",...w("password"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),v.password&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:v.password.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-zinc-300",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",placeholder:"••••••••",...w("confirmPassword"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),v.confirmPassword&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:v.confirmPassword.message})]}),(0,r.jsx)(u.$,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 text-white hover:from-blue-400 hover:to-violet-500 rounded-xl py-6 text-base font-medium transition-all duration-300 hover:shadow-[0_0_30px_rgba(99,102,241,0.3)]",disabled:s,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]}),(0,r.jsxs)("p",{className:"mt-6 text-center text-xs text-zinc-500",children:["By creating an account, you agree to our"," ",(0,r.jsx)(l(),{href:"/terms",className:"text-zinc-400 underline hover:text-white transition-colors",children:"Terms of Service"})," ","and"," ",(0,r.jsx)(l(),{href:"/privacy",className:"text-zinc-400 underline hover:text-white transition-colors",children:"Privacy Policy"})]}),(0,r.jsxs)("p",{className:"mt-4 text-center text-sm text-zinc-400",children:["Already have an account?"," ",(0,r.jsx)(l(),{href:"/login",className:"font-medium text-blue-400 hover:text-blue-300 transition-colors",children:"Sign in"})]})]})})]})}},9848:(e,t,s)=>{Promise.resolve().then(s.bind(s,6534))}},e=>{e.O(0,[850,8500,2619,7716,2723,6875,6223,8441,3794,7358],()=>e(e.s=9848)),_N_E=e.O()}]);