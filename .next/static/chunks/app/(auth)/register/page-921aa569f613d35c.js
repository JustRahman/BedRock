(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2678],{36534:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(95155),r=s(12115),l=s(98500),o=s.n(l),i=s(73321),n=s(99003),c=s(33546),d=s(86443),m=s(28713),u=s(89239),h=s(15283),x=s(52484),p=s(439),g=s(6296);let b=d.Ikc({fullName:d.YjP().min(2,"Name must be at least 2 characters"),email:d.YjP().email("Please enter a valid email address"),password:d.YjP().min(8,"Password must be at least 8 characters"),confirmPassword:d.YjP()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function f(){(0,i.useRouter)();let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[d,f]=(0,r.useState)(!1),{register:w,handleSubmit:N,formState:{errors:y}}=(0,n.mN)({resolver:(0,c.u)(b),defaultValues:(()=>{try{let e=localStorage.getItem("onboardingData")||sessionStorage.getItem("onboardingData");if(e){let t=JSON.parse(e);return{fullName:t.basicInfo?.fullName||"",email:t.basicInfo?.email||""}}}catch{}return{}})()}),v=async e=>{if(l(!0),t(null),!(0,m.$)()){t("Database not configured. Please add your Supabase credentials to .env.local and restart the server."),l(!1);return}try{let s=(0,m.U)(),a=window.location.origin,r=sessionStorage.getItem("student_role")||localStorage.getItem("student_role");console.log("[register] student_role:",r);let{data:o,error:i}=await s.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.fullName,role:r||"founder"},emailRedirectTo:`${a}/login`}});if(i){t(i.message),l(!1);return}let n=localStorage.getItem("onboardingData")||sessionStorage.getItem("onboardingData"),c=localStorage.getItem("trustScoreResult")||sessionStorage.getItem("trustScoreResult"),d=n?JSON.parse(n):null,u=d?.basicInfo||{},h=c?JSON.parse(c):null,x=[];for(let e of[{type:"github",key:"oauth_github_data"},{type:"linkedin",key:"oauth_linkedin_data"},{type:"stripe",key:"oauth_stripe_data"}]){let t=localStorage.getItem(e.key)||sessionStorage.getItem(e.key);if(t)try{x.push({type:e.type,data:JSON.parse(t)})}catch{}}let p=!1;try{let t=o?.user?.id,s=await fetch("/api/auth/complete-registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,email:e.email,fullName:e.fullName,phone:u.phone||null,dateOfBirth:u.dateOfBirth||null,countryOfOrigin:u.countryOfOrigin||"",countryOfResidence:u.countryOfResidence||"",trustScore:h,oauthVerifications:x.length>0?x:void 0,role:sessionStorage.getItem("student_role")||localStorage.getItem("student_role")||void 0})});p=s.ok,console.log("[register] complete-registration status:",s.status,"ok:",s.ok)}catch{console.error("Failed to save registration data")}if(p)try{localStorage.removeItem("trustScoreResult"),sessionStorage.removeItem("trustScoreResult"),localStorage.removeItem("student_role"),sessionStorage.removeItem("student_role"),localStorage.removeItem("student_onboarding_extra"),sessionStorage.removeItem("student_onboarding_extra")}catch{}try{await fetch("/api/email/welcome",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.fullName,email:e.email})})}catch{}f(!0)}catch(s){let e=s instanceof Error?s.message:"Something went wrong";"Load failed"===e||e.includes("fetch")?t("Cannot connect to the server. Please check that Supabase is configured in .env.local and restart the dev server."):t(e)}finally{l(!1)}};return d?(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-[#09090b] px-4 py-12 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] opacity-40",children:[(0,a.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-600/30 rounded-full blur-[128px]"}),(0,a.jsx)("div",{className:"absolute top-20 right-1/4 w-80 h-80 bg-violet-600/25 rounded-full blur-[128px]"})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:64px_64px]"}),(0,a.jsx)("div",{className:"relative w-full max-w-md",children:(0,a.jsxs)("div",{className:"rounded-2xl border border-white/[0.08] bg-white/[0.03] p-8 sm:p-10 backdrop-blur-sm text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-emerald-500/10 border border-emerald-500/20 mb-6",children:(0,a.jsx)(x.A,{className:"h-7 w-7 text-emerald-400"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Check your email"}),(0,a.jsx)("p",{className:"mt-2 text-zinc-400",children:"We've sent you a confirmation link. Please check your email to verify your account."}),(0,a.jsx)(o(),{href:"/login",children:(0,a.jsx)(u.$,{variant:"ghost",className:"mt-6 w-full border border-white/[0.15] text-zinc-200 hover:bg-white/[0.08] hover:border-white/[0.25] hover:text-white rounded-xl py-6 text-base backdrop-blur-sm",children:"Return to Login"})})]})})]}):(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-[#09090b] px-4 py-12 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] opacity-40",children:[(0,a.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-600/30 rounded-full blur-[128px]"}),(0,a.jsx)("div",{className:"absolute top-20 right-1/4 w-80 h-80 bg-violet-600/25 rounded-full blur-[128px]"})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:64px_64px]"}),(0,a.jsx)("div",{className:"relative w-full max-w-md",children:(0,a.jsxs)("div",{className:"rounded-2xl border border-white/[0.08] bg-white/[0.03] p-8 sm:p-10 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)(o(),{href:"/",className:"inline-flex items-center justify-center gap-2.5 group",children:[(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-violet-600 transition-transform duration-300 group-hover:scale-105",children:(0,a.jsx)(p.A,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("span",{className:"text-lg font-semibold tracking-tight text-white",children:"BedRock"})]}),(0,a.jsx)("h1",{className:"mt-6 text-2xl font-bold text-white",children:"Create an account"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-zinc-400",children:"Start your journey with BedRock"})]}),(0,a.jsxs)("form",{onSubmit:N(v),className:"space-y-5",children:[e&&(0,a.jsx)(h.Fc,{variant:"destructive",className:"border-red-500/20 bg-red-500/10 text-red-300",children:(0,a.jsx)(h.TN,{children:e})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-zinc-300",children:"Full Name"}),(0,a.jsx)("input",{id:"fullName",type:"text",placeholder:"John Doe",...w("fullName"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),y.fullName&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:y.fullName.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-zinc-300",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",placeholder:"founder@company.com",...w("email"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),y.email&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:y.email.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-zinc-300",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",placeholder:"••••••••",...w("password"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),y.password&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:y.password.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-zinc-300",children:"Confirm Password"}),(0,a.jsx)("input",{id:"confirmPassword",type:"password",placeholder:"••••••••",...w("confirmPassword"),className:"w-full rounded-xl border border-white/[0.1] bg-white/[0.05] px-4 py-3 text-sm text-white placeholder-zinc-500 outline-none transition-colors focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/30"}),y.confirmPassword&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:y.confirmPassword.message})]}),(0,a.jsx)(u.$,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 text-white hover:from-blue-400 hover:to-violet-500 rounded-xl py-6 text-base font-medium transition-all duration-300 hover:shadow-[0_0_30px_rgba(99,102,241,0.3)]",disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]}),(0,a.jsxs)("p",{className:"mt-6 text-center text-xs text-zinc-500",children:["By creating an account, you agree to our"," ",(0,a.jsx)(o(),{href:"/terms",className:"text-zinc-400 underline hover:text-white transition-colors",children:"Terms of Service"})," ","and"," ",(0,a.jsx)(o(),{href:"/privacy",className:"text-zinc-400 underline hover:text-white transition-colors",children:"Privacy Policy"})]}),(0,a.jsxs)("p",{className:"mt-4 text-center text-sm text-zinc-400",children:["Already have an account?"," ",(0,a.jsx)(o(),{href:"/login",className:"font-medium text-blue-400 hover:text-blue-300 transition-colors",children:"Sign in"})]})]})})]})}},52484:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(90425).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},79848:(e,t,s)=>{Promise.resolve().then(s.bind(s,36534))}},e=>{e.O(0,[850,8500,9304,5214,9348,3546,6223,8441,3794,7358],()=>e(e.s=79848)),_N_E=e.O()}]);