(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{1447:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>T});var a=t(5155),r=t(2115),i=t(439),n=t(122),l=t(7420),o=t(49);t(3523);var c=t(1477),d=t(5160);let m={completed:{badge:"bg-green-100 text-green-700",label:"Completed"},in_progress:{badge:"bg-blue-100 text-blue-700",label:"In Progress"},pending:{badge:"bg-yellow-100 text-yellow-700",label:"Pending"},not_started:{badge:"bg-gray-100 text-gray-700",label:"Not Started"}};function u({title:e,icon:s,status:t,statusText:r,description:i}){let n=m[t];return(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ZB,{className:"text-sm font-medium text-gray-500",children:e}),(0,a.jsx)(s,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(d.E,{className:n.badge,children:n.label})}),(0,a.jsx)("p",{className:"mt-2 text-lg font-semibold text-gray-900",children:r}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:i})]})]})}var p=t(9239),x=t(8368),h=t(9372),g=t(3545),f=t(1628),j=t(8500),b=t.n(j);let y={document:x.A,calendar:l.A,payment:h.A,alert:g.A},N={high:"border-l-red-500",medium:"border-l-yellow-500",low:"border-l-blue-500"};function v({items:e}){return 0===e.length?(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-lg",children:"Action Items"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"You're all caught up! No pending actions."})})]}):(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-lg",children:"Action Items"})}),(0,a.jsx)(c.Wu,{className:"space-y-4",children:e.map(e=>{let s=y[e.icon];return(0,a.jsx)("div",{className:`rounded-lg border border-l-4 bg-gray-50 p-4 ${N[e.priority]}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(s,{className:"mt-0.5 h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description})]})]}),(0,a.jsx)(b(),{href:e.href,children:(0,a.jsxs)(p.$,{size:"sm",variant:"ghost",className:"shrink-0 gap-1",children:["Take Action",(0,a.jsx)(f.A,{className:"h-4 w-4"})]})})]})},e.id)})})]})}var w=t(1606),_=t(5612),k=t(4071);function A({score:e,status:s,statusLabel:t,breakdown:r}){return(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ZB,{className:"text-lg",children:"Trust Score"}),(0,a.jsx)(k.A,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:`text-4xl font-bold ${(0,_.Oz)(e)}`,children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.E,{className:(0,_.qY)(s),children:t}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"out of 100 points"})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsx)(S,{label:"Digital Lineage",value:r.digitalLineage,max:40}),(0,a.jsx)(S,{label:"Business",value:r.business,max:25}),(0,a.jsx)(S,{label:"Identity",value:r.identity,max:20}),(0,a.jsx)(S,{label:"Network",value:r.network,max:15})]})]})]})}function S({label:e,value:s,max:t}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:e}),(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:[s,"/",t]})]}),(0,a.jsx)(w.Progress,{value:s/t*100,className:"h-2"})]})}var C=t(2845),L=t(6296),$=t(2651),P=t(1585),D=t(4980),E=t(1975);let B={passport:"Passport",local_id:"Local ID",address_proof:"Address Proof"};function I({onUploadsComplete:e}){let[s,t]=(0,r.useState)("checking"),[i,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(""),c=(0,r.useCallback)(async()=>{t("uploading"),n([]),o("");try{let s=await (0,C.ox)();if(0===s.length)return void t("idle");let a=[];for(let e of s){let s=new FormData,t=new File([e.blob],e.fileName,{type:e.mimeType});s.append("file",t),s.append("type",e.type);let r=await fetch("/api/documents",{method:"POST",body:s});if(!r.ok){let s=await r.json();throw Error(s.error||`Failed to upload ${B[e.type]}`)}let i=await r.json();a.push({label:B[e.type],verificationStatus:i.verification?.status??null}),n([...a])}await (0,C.zD)(),t("success"),e?.()}catch(e){o(e instanceof Error?e.message:"Upload failed"),t("error")}},[e]);return((0,r.useEffect)(()=>{!async function(){try{let e=await (0,C.ox)();if(0===e.length)return void t("idle");c()}catch{t("idle")}}()},[c]),"idle"===s||"checking"===s)?null:(0,a.jsxs)("div",{className:"mb-6 rounded-lg border p-4",children:["uploading"===s&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 animate-spin text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Uploading and verifying your documents..."}),i.length>0&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Uploaded: ",i.map(e=>e.label).join(", ")]})]})]}),"success"===s&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)($.A,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Documents uploaded successfully!"}),(0,a.jsx)("div",{className:"mt-1 space-y-1",children:i.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-gray-700",children:e.label}),(0,a.jsx)("span",{className:"text-gray-400",children:"â€”"}),"verified"===e.verificationStatus?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,a.jsx)($.A,{className:"h-3.5 w-3.5"}),"Verified"]}):"review_needed"===e.verificationStatus?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-orange-600",children:[(0,a.jsx)(P.A,{className:"h-3.5 w-3.5"}),"Review needed"]}):(0,a.jsxs)("span",{className:"flex items-center gap-1 text-gray-500",children:[(0,a.jsx)(D.A,{className:"h-3.5 w-3.5"}),"Pending review"]})]},s))}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["View them on the"," ",(0,a.jsx)("a",{href:"/dashboard/documents",className:"text-blue-600 underline",children:"Documents page"}),"."]})]})]}),"error"===s&&(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 text-amber-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Upload failed"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:l})]})]}),(0,a.jsxs)(p.$,{variant:"outline",size:"sm",onClick:c,className:"gap-2",children:[(0,a.jsx)(E.A,{className:"h-4 w-4"}),"Retry"]})]})]})}let O={elite:"Elite",approved:"Approved",review_needed:"Review Needed",conditional:"Conditional",not_eligible:"Not Eligible"};function T(){let[e,s]=(0,r.useState)(null),[t,d]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[x,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[j,b]=(0,r.useState)(!0),y=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/documents");if(e.ok){let s=await e.json();d(s.documents??[])}}catch{}},[]);if((0,r.useEffect)(()=>{!async function(){try{let[e,t,a,r,i]=await Promise.all([fetch("/api/trust-score"),fetch("/api/documents"),fetch("/api/compliance"),fetch("/api/companies"),fetch("/api/bank-applications")]);if(e.ok){let t=await e.json();s(t.trustScore??null)}if(t.ok){let e=await t.json();d(e.documents??[])}if(a.ok){let e=await a.json();p(e.deadlines??[])}if(r.ok){let e=await r.json();h(e.company??null)}if(i.ok){let e=await i.json();e.applications&&e.applications.length>0&&f(e.applications[0])}}catch{}finally{b(!1)}}()},[]),j)return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"h-8 w-48 animate-pulse rounded bg-gray-200"}),(0,a.jsx)("div",{className:"mt-2 h-4 w-72 animate-pulse rounded bg-gray-200"})]}),(0,a.jsx)("div",{className:"mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"h-24 animate-pulse rounded bg-gray-100"})})},s))})]});t.filter(e=>e.verified).length,t.filter(e=>!e.verified).length;let N=m.filter(e=>!e.completed).length,w=m.filter(e=>!e.completed&&new Date(e.due_date)<new Date).length,_=x?.formation_status||"not_started",k=x?"formed"===_?x.ein?"LLC Formed + EIN":"LLC Formed":"processing"===_?"Processing":"Pending":"Not Started",S=g?.status||"not_started",C=g?"approved"===g.status?"Approved":"submitted"===g.status||"under_review"===g.status?`${g.bank_name} - ${g.status.replace("_"," ")}`:"Draft":"Not Started",L=[];return e||L.push({id:"onboard",title:"Complete Onboarding",description:"Finish the onboarding process to calculate your trust score",priority:"high",icon:"alert",href:"/onboarding"}),0===t.length&&L.push({id:"upload-docs",title:"Upload Documents",description:"Upload your verification documents to get started",priority:"high",icon:"document",href:"/dashboard/documents"}),!x&&e&&L.push({id:"start-formation",title:"Start LLC Formation",description:"Begin your LLC formation process",priority:"high",icon:"alert",href:"/dashboard/formation"}),x&&"formed"===x.formation_status&&!x.ein&&L.push({id:"get-ein",title:"Obtain Your EIN",description:"Your LLC is formed. Get your EIN from the IRS.",priority:"high",icon:"alert",href:"/dashboard/formation/ein"}),x?.ein&&!g&&L.push({id:"bank-app",title:"Apply for Bank Account",description:"Your LLC and EIN are ready. Start your bank application.",priority:"high",icon:"payment",href:"/dashboard/bank/application"}),w>0&&L.push({id:"overdue",title:`${w} Overdue Deadline${w>1?"s":""}`,description:"You have overdue compliance deadlines that need attention",priority:"high",icon:"alert",href:"/dashboard/compliance"}),N>0&&0===w&&L.push({id:"upcoming",title:`${N} Upcoming Deadline${N>1?"s":""}`,description:"Stay on top of your compliance deadlines",priority:"medium",icon:"calendar",href:"/dashboard/compliance"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(I,{onUploadsComplete:y}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Welcome back! Here's an overview of your account status."})]}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(u,{title:"Trust Score",icon:i.A,status:e?"completed":"not_started",statusText:e?`${e.total_score} / 100`:"Not calculated",description:e?O[e.status]:"Complete onboarding first"}),(0,a.jsx)(u,{title:"Formation",icon:n.A,status:"formed"===_?"completed":"processing"===_||"pending"===_?"in_progress":"not_started",statusText:k,description:x?`${x.name}`:"Start LLC formation"}),(0,a.jsx)(u,{title:"Compliance",icon:l.A,status:w>0?"pending":N>0?"in_progress":"completed",statusText:`${N} upcoming`,description:w>0?`${w} overdue`:"All on track"}),(0,a.jsx)(u,{title:"Bank Account",icon:o.A,status:"approved"===S||"completed"===S?"completed":"submitted"===S||"under_review"===S?"in_progress":"draft"===S?"pending":"not_started",statusText:C,description:g?`${g.bank_name||"Bank"}`:"Available after EIN"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:e?(0,a.jsx)(A,{score:e.total_score,status:e.status,statusLabel:O[e.status],breakdown:{digitalLineage:e.digital_lineage_score,business:e.business_score,identity:e.identity_score,network:e.network_score}}):(0,a.jsx)(c.Zp,{children:(0,a.jsxs)(c.Wu,{className:"py-12 text-center",children:[(0,a.jsx)(i.A,{className:"mx-auto mb-3 h-10 w-10 text-gray-300"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"No Trust Score Yet"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Complete the onboarding process to calculate your score."})]})})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(v,{items:L})})]})]})}},2845:(e,s,t)=>{"use strict";t.d(s,{M7:()=>i,ox:()=>n,zD:()=>l});let a="uploads";function r(){return new Promise((e,s)=>{let t=indexedDB.open("bedrock_pending_uploads",1);t.onupgradeneeded=()=>{let e=t.result;e.objectStoreNames.contains(a)||e.createObjectStore(a,{keyPath:"type"})},t.onsuccess=()=>e(t.result),t.onerror=()=>s(t.error)})}async function i(e,s){let t=await r();return new Promise((r,i)=>{let n=t.transaction(a,"readwrite");n.objectStore(a).put({type:e,fileName:s.name,mimeType:s.type,blob:s}),n.oncomplete=()=>r(),n.onerror=()=>i(n.error)})}async function n(){let e=await r();return new Promise((s,t)=>{let r=e.transaction(a,"readonly").objectStore(a).getAll();r.onsuccess=()=>s(r.result),r.onerror=()=>t(r.error)})}async function l(){let e=await r();return new Promise((s,t)=>{let r=e.transaction(a,"readwrite");r.objectStore(a).clear(),r.oncomplete=()=>s(),r.onerror=()=>t(r.error)})}},3523:(e,s,t)=>{"use strict";t.d(s,{Sidebar:()=>b});var a=t(5155),r=t(8500),i=t.n(r),n=t(3321),l=t(8401),o=t(122),c=t(8368),d=t(7420),m=t(49),u=t(9372),p=t(9363),x=t(439),h=t(1313),g=t(8713),f=t(9239);let j=[{name:"Overview",href:"/dashboard",icon:l.A},{name:"Formation",href:"/dashboard/formation",icon:o.A},{name:"Documents",href:"/dashboard/documents",icon:c.A},{name:"Compliance",href:"/dashboard/compliance",icon:d.A},{name:"Bank Account",href:"/dashboard/bank",icon:m.A},{name:"Billing",href:"/dashboard/billing",icon:u.A},{name:"Settings",href:"/dashboard/settings",icon:p.A}];function b(){let e=(0,n.usePathname)(),s=(0,n.useRouter)(),t=async()=>{let e=(0,g.U)();await e.auth.signOut(),s.push("/login")};return(0,a.jsxs)("aside",{className:"flex h-screen w-64 flex-col border-r border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex h-16 items-center gap-2 border-b border-gray-200 px-6",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"BedRock"})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-4",children:j.map(s=>{let t=e===s.href;return(0,a.jsxs)(i(),{href:s.href,className:`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${t?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[(0,a.jsx)(s.icon,{className:"h-5 w-5"}),s.name]},s.name)})}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,a.jsxs)(f.$,{variant:"ghost",className:"w-full justify-start gap-2 text-gray-700",onClick:t,children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"Sign Out"]})})]})}},7851:(e,s,t)=>{Promise.resolve().then(t.bind(t,1447))},8713:(e,s,t)=>{"use strict";t.d(s,{$:()=>r,U:()=>i});var a=t(7716);function r(){let e="https://your-prod-project.supabase.co",s="your_prod_supabase_anon_key";return!!(e&&s&&!e.includes("your-")&&!e.includes("your_")&&!s.includes("your_")&&!s.includes("your-"))}function i(){return(0,a.createBrowserClient)("https://your-prod-project.supabase.co","your_prod_supabase_anon_key")}}},e=>{e.O(0,[850,8500,2619,7716,2723,2032,2233,7122,8441,3794,7358],()=>e(e.s=7851)),_N_E=e.O()}]);